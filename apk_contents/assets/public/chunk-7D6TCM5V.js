import{$ as re,$b as Ae,Ce as pt,Da as ue,Db as he,Dd as et,Ea as me,Eb as _e,Fe as gt,G as u,Ga as pe,Gb as xe,Hb as be,Ib as Pe,Jb as Oe,Je as Ct,Kb as Me,Lb as we,Ma as ge,Mb as ve,Mc as $e,N as de,Na as Ce,Nc as qe,Pe as ft,Qd as tt,Rb as Ee,Tb as Se,Tc as Ue,Td as nt,Ub as ye,Uc as De,Vb as Ie,W as A,Wb as ke,X as T,Xb as ze,Yb as Fe,_ as ae,aa as Q,ba as a,ca as c,cd as je,da as b,de as it,ed as Ge,fe as ot,gb as fe,ge as at,ha as $,ia as I,ja as x,jc as Te,jd as Be,kd as Qe,md as He,me as rt,na as J,nc as Ne,oa as K,oe as ct,pa as ee,pc as Le,qa as ce,qd as Ze,qe as st,rd as We,sa as te,sd as Xe,se as lt,t as B,td as Ye,te as dt,ua as m,va as w,vc as Ve,vd as Je,ve as ut,wa as se,wd as Ke,we as mt,x as S,y,yc as Re}from"./chunk-OBFQNIQD.js";import"./chunk-IUPZEBQM.js";import"./chunk-ELQ7OX2S.js";import"./chunk-TPXQ57Z4.js";import"./chunk-WSSRTRMN.js";import"./chunk-BRTOTKMZ.js";import"./chunk-WKTTIGE2.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{i as F}from"./chunk-RLOPVUMC.js";var ht=["estudiantesFileInput"],_t=["calificacionesFileInput"],xt=["rubricaFileInput"],bt=(s,C)=>C.codigo,Pt=(s,C)=>C.id;function Ot(s,C){if(s&1){let o=$();a(0,"span",29),m(1),c(),a(2,"ion-icon",30),I("click",function(e){return S(o),x(2).desvincularArchivoEstudiantes(),y(e.stopPropagation())}),c()}if(s&2){let o=x(2);u(),w(o.estudiantesFileName)}}function Mt(s,C){s&1&&(a(0,"span",26),m(1,"Cargar Archivo"),c())}function wt(s,C){if(s&1){let o=$();a(0,"span",29),m(1),c(),a(2,"ion-icon",30),I("click",function(e){return S(o),x(2).desvincularArchivoCalificaciones(),y(e.stopPropagation())}),c()}if(s&2){let o=x(2);u(),w(o.calificacionesFileName)}}function vt(s,C){if(s&1){let o=$();a(0,"span",31),m(1),c(),a(2,"ion-badge",32),m(3,"Guardado"),c(),a(4,"ion-icon",30),I("click",function(e){return S(o),x(2).eliminarArchivoCalificacionesGuardado(),y(e.stopPropagation())}),c()}if(s&2){let o=x(2);u(),w(o.obtenerNombreArchivoCalificaciones(o.codigoCursoEnEdicion))}}function Et(s,C){s&1&&(a(0,"span",26),m(1,"Cargar Archivo"),c())}function St(s,C){if(s&1){let o=$();a(0,"ion-col",11)(1,"div",19)(2,"div",20),I("click",function(){S(o);let e=ce(4);return y(e.click())}),a(3,"input",21,0),I("change",function(e){S(o);let i=x();return y(i.onEstudiantesFileSelected(e))}),c(),a(5,"div",22),b(6,"ion-icon",23),a(7,"span"),m(8,"Personas"),c(),b(9,"ion-icon",24),c(),a(10,"div",25),A(11,Ot,3,1)(12,Mt,2,0,"span",26),c()(),a(13,"div",20),I("click",function(){S(o);let e=ce(15);return y(e.click())}),a(14,"input",27,1),I("change",function(e){S(o);let i=x();return y(i.onCalificacionesFileSelected(e))}),c(),a(16,"div",22),b(17,"ion-icon",28),a(18,"span"),m(19,"Calificaciones"),c(),b(20,"ion-icon",24),c(),a(21,"div",25),A(22,wt,3,1)(23,vt,5,1)(24,Et,2,0,"span",26),c()()()()}if(s&2){let o=x();u(2),te("has-file",o.estudiantesFileName),u(9),T(o.estudiantesFileName?11:12),u(2),te("has-file",o.calificacionesFileName||o.codigoCursoEnEdicion&&o.obtenerNombreArchivoCalificaciones(o.codigoCursoEnEdicion)),u(9),T(o.calificacionesFileName?22:o.codigoCursoEnEdicion&&o.obtenerNombreArchivoCalificaciones(o.codigoCursoEnEdicion)?23:24)}}function yt(s,C){if(s&1){let o=$();a(0,"ion-button",33),I("click",function(){S(o);let e=x();return y(e.iniciarCreacionCurso())}),b(1,"ion-icon",34),m(2," Crear "),c()}}function It(s,C){if(s&1){let o=$();a(0,"ion-button",35),I("click",function(){S(o);let e=x();return y(e.deseleccionarCurso())}),b(1,"ion-icon",36),m(2," Cancelar "),c(),a(3,"ion-button",37),I("click",function(){S(o);let e=x();return y(e.guardarCurso())}),b(4,"ion-icon",38),m(5," Guardar "),c()}}function kt(s,C){s&1&&(a(0,"div",17)(1,"p"),m(2,"No hay cursos disponibles"),c()())}function zt(s,C){s&1&&(a(0,"ion-badge",32),m(1,"Con calificaciones"),c())}function Ft(s,C){if(s&1){let o=$();a(0,"ion-item-sliding")(1,"ion-item",39),I("click",function(){let e=S(o).$implicit,i=x(2);return y(i.seleccionarCurso(e.codigo))}),a(2,"ion-label")(3,"div",40)(4,"div",41)(5,"h2"),m(6),c(),a(7,"p",42)(8,"strong"),m(9),c()()(),a(10,"div",43)(11,"p",44),b(12,"ion-icon",45),m(13),ue(14,"date"),c(),A(15,zt,2,0,"ion-badge",32),c()()()(),a(16,"ion-item-options",46)(17,"ion-item-option",47),I("click",function(){let e=S(o).$implicit,i=x(2);return i.seleccionarCurso(e.codigo),y(i.editarCursoSeleccionado())}),b(18,"ion-icon",48),c(),a(19,"ion-item-option",49),I("click",function(e){let i=S(o).$implicit,n=x(2);return y(n.eliminarCurso(i,e))}),b(20,"ion-icon",50),c()()()}if(s&2){let o=C.$implicit,t=x(2);u(),te("item-selected",t.cursoSeleccionado===o.codigo),u(5),w(o.nombre),u(3),w(o.codigo),u(4),se(" ",me(14,6,o.fechaCreacion,"dd/MM/yyyy")," "),u(2),T(o.tieneCalificaciones?15:-1)}}function At(s,C){if(s&1&&(a(0,"ion-list",18),ae(1,Ft,21,9,"ion-item-sliding",null,bt),c()),s&2){let o=x();u(),re(o.cursosDisponibles)}}function Tt(s,C){if(s&1&&(a(0,"ion-chip",63),b(1,"ion-icon",68),a(2,"ion-label"),m(3),c()()),s&2){let o=x().$implicit;u(3),w(o.cursoAsociado)}}function Nt(s,C){if(s&1&&(a(0,"ion-item",57),b(1,"ion-icon",59),a(2,"ion-label")(3,"div",60)(4,"h3"),m(5),c(),a(6,"ion-badge",61),m(7),c()(),a(8,"div",62),A(9,Tt,4,1,"ion-chip",63),a(10,"ion-chip",64),b(11,"ion-icon",65),a(12,"ion-label"),m(13),c()(),a(14,"ion-chip",66),b(15,"ion-icon",67),a(16,"ion-label"),m(17),c()()()()()),s&2){let o=C.$implicit;u(),Q("color",o.tipoRubrica==="PG"?"primary":"secondary"),u(4),w(o.nombre),u(2),se(" ",o.puntuacionTotal," pts "),u(2),T(o.cursoAsociado?9:-1),u(),Q("color",o.tipoRubrica==="PG"?"primary":"secondary"),u(),Q("name",o.tipoRubrica==="PG"?"people":"person"),u(2),w(o.tipoRubrica==="PG"?"Grupal":"Individual"),u(4),w(o.tipoEntrega||"Sin especificar")}}function Lt(s,C){if(s&1&&(a(0,"div",51)(1,"div",53),b(2,"ion-icon",54),a(3,"h4"),m(4,"R\xFAbricas Asociadas"),c(),a(5,"ion-badge",55),m(6),c()(),a(7,"ion-list",56),ae(8,Nt,18,8,"ion-item",57,Pt),c(),b(10,"hr",58),c()),s&2){let o=x(2);u(6),w(o.rubricasAsociadas.length),u(2),re(o.rubricasAsociadas)}}function Vt(s,C){if(s&1&&(a(0,"div",52),b(1,"hr",58),a(2,"h4",69),b(3,"ion-icon",70),m(4," Informaci\xF3n del Curso "),c(),a(5,"div",71)(6,"div",72)(7,"div")(8,"span",73),m(9,"Bloque:"),c(),a(10,"strong"),m(11),c()(),a(12,"div")(13,"span",73),m(14,"C\xF3digo:"),c(),a(15,"strong"),m(16),c()(),a(17,"div")(18,"span",73),m(19,"Nombre:"),c(),a(20,"strong"),m(21),c()(),a(22,"div")(23,"span",73),m(24,"Estudiantes:"),c(),a(25,"strong"),m(26),c()()()()()),s&2){let o=x(2);u(11),w(o.cursoParseado.bloque||"No detectado"),u(5),w(o.cursoParseado.codigo||"No detectado"),u(5),w(o.cursoParseado.nombre||"No detectado"),u(5),w(o.estudiantesCargados.length)}}function Rt(s,C){if(s&1&&(a(0,"ion-card",5)(1,"ion-card-content"),A(2,Lt,11,1,"div",51),A(3,Vt,27,4,"div",52),c()()),s&2){let o=x();u(2),T(o.cursoSeleccionado&&!o.modoEdicion&&o.rubricasAsociadas.length>0?2:-1),u(),T(o.cursoParseado?3:-1)}}var en=(()=>{let C=class C{constructor(){this.dataService=B(ft),this.toastController=B(Ne),this.alertController=B(Te),this.cursosDisponibles=[],this.cursoSeleccionado=null,this.modoEdicion=!1,this.rubricasAsociadas=[],this.estudiantesFileName="",this.calificacionesFileName="",this.rubricaFileName="",this.estudiantesCargados=[],this.calificacionesCargadas=null,this.calificacionesParseadas=[],this.rubricaCargada=null,this.cursoParseado=null,this.codigoCursoEnEdicion="",this.cd=B(pe),Ve({library:tt,peopleOutline:ot,cloudUploadOutline:Be,closeCircle:je,statsChartOutline:gt,addCircleOutline:Re,closeOutline:Ge,saveOutline:dt,calendarOutline:qe,createOutline:He,trashOutline:Ct,documentTextOutline:Xe,ribbonOutline:st,school:ut,calendar:$e,schoolOutline:mt,save:lt,documentsOutline:Ye,codeSlash:Qe,checkmarkCircle:Ue,eyeOutline:et,downloadOutline:Je,ellipseOutline:Ke,documentText:We,star:pt,checkmarkCircleOutline:De,documentOutline:Ze,listOutline:nt,pricetagOutline:rt,refreshOutline:ct,people:it,person:at})}ngOnInit(){}ionViewWillEnter(){this.cargarCursos()}cargarCursos(){let e=this.dataService.getUIState().courseStates||{};this.cursosDisponibles=Object.entries(e).map(([i,n])=>{let r=n.metadata?.codigoUnico||i,g=this.dataService.obtenerArchivoCalificaciones(i)!==null;return{nombre:n.metadata?.nombre||i,nombreAbreviado:n.metadata?.nombreAbreviado||"",codigo:r,codigoBase:n.metadata?.codigo||"",bloque:n.metadata?.bloque||"",fechaCreacion:n.metadata?.fechaCreacion||"",tieneCalificaciones:g}}).sort((i,n)=>i.nombre.localeCompare(n.nombre))}iniciarCreacionCurso(){console.log("\u{1F518} [CursosPage] Click en Crear Curso - Iniciando...");try{this.modoEdicion=!0,this.cursoSeleccionado=null,this.limpiarFormulario(),this.cd.detectChanges(),console.log("\u2705 [CursosPage] Modo edici\xF3n activado")}catch(t){console.error("\u274C [CursosPage] Error al iniciar creaci\xF3n:",t)}}seleccionarCurso(t){this.cursoSeleccionado=t,this.modoEdicion=!1,this.cargarRubricasAsociadas(t)}deseleccionarCurso(){this.cursoSeleccionado=null,this.modoEdicion=!1,this.limpiarFormulario(),this.rubricasAsociadas=[]}cargarRubricasAsociadas(t){let e=this.dataService.obtenerRubricasArray();this.rubricasAsociadas=e.filter(i=>i.cursosCodigos?.includes(t)).sort((i,n)=>{let r={E1:1,E2:2,EF:3},g=r[i.tipoEntrega||""]||999,f=r[n.tipoEntrega||""]||999;if(g!==f)return g-f;let v=i.tipoRubrica==="PG"?0:1,h=n.tipoRubrica==="PG"?0:1;return v-h})}editarCursoSeleccionado(){if(!this.cursoSeleccionado)return;let t=this.cursosDisponibles.find(n=>n.codigo===this.cursoSeleccionado);if(!t)return;this.modoEdicion=!0,this.codigoCursoEnEdicion=t.codigo,this.cursoParseado={nombre:t.nombre,codigo:t.codigo,bloque:t.bloque};let e=this.dataService.getCurso(t.codigo);e&&e.length>0&&(this.estudiantesCargados=e,this.estudiantesFileName=`${t.codigo}_estudiantes.csv`);let i=this.dataService.obtenerArchivoCalificaciones(t.codigo);i&&(this.calificacionesCargadas=i,this.calificacionesFileName=i.nombre)}onEstudiantesFileSelected(t){return F(this,null,function*(){let e=t.target;if(!e.files||e.files.length===0)return;let i=e.files[0];this.estudiantesFileName=i.name;try{let r=(yield this.leerArchivo(i)).split(`
`).filter(l=>l.trim());if(r.length<2)throw new Error("Archivo CSV vac\xEDo");let g=l=>{let d=[],p=!1,O="";for(let k=0;k<l.length;k++){let E=l[k];E==='"'?p=!p:E===","&&!p?(d.push(O.trim()),O=""):O+=E}return d.push(O.trim()),d},f=g(r[0]);console.log("========================================"),console.log("\u{1F4CB} AN\xC1LISIS COMPLETO DEL CSV"),console.log("========================================"),console.log("Total de l\xEDneas en el archivo:",r.length),console.log("Headers completos:",f),console.log("Primeros 4 headers:",f.slice(0,4));let v=f.findIndex(l=>{let d=l.toLowerCase().trim();return d==="student"||d==="nombre"}),h=f.findIndex(l=>{let d=l.toLowerCase().trim();return d==="id"||d==="canvas_user_id"||d==="canvas user id"}),N=f.findIndex(l=>{let d=l.toLowerCase().trim();return d==="sis login id"||d==="login_id"||d==="sis user id"}),L=f.findIndex(l=>{let d=l.toLowerCase().trim();return d==="section"||d==="secciones"}),R=f.findIndex(l=>{let d=l.toLowerCase().trim();return d==="group_name"||d==="group name"}),q=f.findIndex(l=>{let d=l.toLowerCase().trim();return d==="canvas_group_id"||d==="canvas group id"}),D=f.findIndex(l=>l.toLowerCase().trim().includes("apellido")),P=f.findIndex(l=>l.toLowerCase().trim().includes("correo")),H=f.findIndex(l=>l.toLowerCase().trim()==="pg"),Z=f.findIndex(l=>l.toLowerCase().trim()==="pi");if(console.log("\u{1F4CD} \xCDndices de columnas detectados:",{nombreIndex:v,canvasUserIdIndex:h,loginIdIndex:N,seccionesIndex:L,groupNameIndex:R,canvasGroupIdIndex:q,apellidoIndex:D,correoIndex:P,pgIndex:H,piIndex:Z}),r.length>1){let l=g(r[1]);console.log("L\xEDnea 2:",l.slice(0,6))}if(r.length>2){let l=g(r[2]);console.log("L\xEDnea 3:",l.slice(0,6))}let le=r.slice(1).filter((l,d)=>{let p=g(l),O=p[0]?.trim().toLowerCase()||"",k=O.includes("points possible"),E=O===""&&p[5]?.toLowerCase().includes("manual posting"),U=O===""&&l.trim()==="";return d<4&&console.log(`Filtro l\xEDnea ${d+2}: "${O.substring(0,30)}" - Points:${k}, ManualPosting:${E}, Vac\xEDa:${U}`),!k&&!E&&!U});console.log(`\u{1F4CA} Total de l\xEDneas de datos despu\xE9s de filtrar: ${le.length}`);let ne=le.map((l,d)=>{let p=g(l).map(_=>_.trim());d<3&&(console.log(`\u{1F50D} DEBUG L\xEDnea ${d+1} del CSV:`),console.log(`   Total columnas: ${p.length}`),p.slice(0,6).forEach((_,V)=>{console.log(`   [${V}]: "${_}"`)}));let O="",k="",E="";if(v>=0&&v<p.length)if(O=(p[v]||"").trim(),d===0&&console.log(`\u{1F4DD} Valor en nombreIndex [${v}]: "${O}"`),O.includes(",")){let _=O.split(",").map(V=>V.trim());k=_[0]||"",E=_[1]||""}else k=O,E="";else D>=0?(k=(p[D]||"").trim(),E=(p[0]||"").trim()):(k=(p[1]||"").trim(),E=(p[0]||"").trim());let U=R>=0?(p[R]||"").trim():"",Y="";if(U){let _=U.match(/\d+/);Y=_?_[0]:""}let G={canvasUserId:h>=0?(p[h]||"").trim():"",canvasGroupId:q>=0?(p[q]||"").trim():"",apellido:k,nombre:E,correo:N>=0?(p[N]||"").trim():P>=0?(p[P]||"").trim():"",grupo:Y,groupName:U,secciones:L>=0?(p[L]||"").trim():"",pg:H>=0?(p[H]||"").trim():"",pi:Z>=0?(p[Z]||"").trim():"",calificaciones:{}},oe=Math.max(4,L+1);if(d===0){console.log("\u{1F50D} MAPEO DE COLUMNAS (Primer estudiante):"),console.log("Total valores parseados:",p.length),console.log("Total headers:",f.length);for(let _=4;_<Math.min(10,f.length);_++)console.log(`  [${_}] "${f[_]}" = "${p[_]||"(vac\xEDo)"}"`)}for(let _=oe;_<p.length&&_<f.length;_++){let V=f[_],z=p[_],M=V.toLowerCase().trim();if(M.includes("current points")||M.includes("final points")||M.includes("current score")||M.includes("final score")||M.includes("unposted")||M.includes("solo lectura")||M.includes("tareas current")||M.includes("tareas final")||M.includes("tareas unposted")||M.includes("herramientas profesor")||M==="notas")continue;V.trim()!==""&&(M.includes("entrega")||M.includes("proyecto")||M.includes("escenario")||M.includes("sustentacion"))&&(G.calificaciones[V]=z||"")}return d===0&&(console.log("\u{1F464} Primer estudiante parseado:",G),console.log("\u{1F4CA} Calificaciones extra\xEDdas:",Object.keys(G.calificaciones))),G}).filter(l=>{let d=(l.nombre||l.apellido)&&(l.nombre+l.apellido).toLowerCase()!=="points possible",p=l.correo&&l.correo.includes("@");return d||p}),j=ne[0]?.secciones||"",W="",ie="",X="";if(j){W=j.match(/\/([^-]+)-/)?.[1]?.trim()||"";let d=z=>z.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase(),p=["DE","EN","DEL","LA","EL","LOS","LAS","A","CON","PARA","POR","Y"],E="E"+W.split(/\s+/).filter(z=>z.length>2).map(z=>d(z)).filter(z=>!p.includes(z)).map(z=>z[0]).join(""),Y=j.match(/\[GRUPO\s+([A-Z0-9]+)\]/i)?.[1]||"B01";X=j.match(/^([A-Z]+)\s+BLOQUE/i)?.[1]||"";let oe=this.convertirBloqueTextoANumero(X),V=j.match(/BLOQUE-([A-Z]+)\//i)?.[1]?.[0]||"P";ie=`${E}-${Y}-BLQ${oe}-${V}`}else{let l=i.name.replace(".csv",""),d=l.match(/^([A-Z]{2,4})(?=B\d+)|([A-Z]{2,4})(?=_)|([A-Z]{2,4})$/),p=l.match(/(B\d+)/i);W=l,ie=d?.[0]||"",X=p?.[1]||""}this.estudiantesCargados=ne,this.cursoParseado={nombre:W,codigo:ie,bloque:X},yield(yield this.toastController.create({message:`${ne.length} estudiantes cargados`,duration:2e3,color:"success",position:"top",icon:"checkmark-circle"})).present()}catch(n){console.error("Error cargando estudiantes:",n),yield(yield this.toastController.create({message:"Error al cargar archivo de estudiantes",duration:3e3,color:"danger",position:"top",icon:"close-circle"})).present()}})}onCalificacionesFileSelected(t){return F(this,null,function*(){let e=t.target;if(!e.files||e.files.length===0)return;let i=e.files[0];this.calificacionesFileName=i.name;try{let n=yield this.leerArchivo(i),r=this.parsearCalificacionesCanvasLocal(n);this.calificacionesCargadas={nombre:i.name,fechaCarga:new Date().toISOString(),contenidoOriginal:n,calificaciones:r},console.log("\u2705 Calificaciones cargadas:",{archivo:i.name,totalRegistros:r.length,primerRegistro:r[0]}),this.parsearCalificaciones(n),console.log("\u{1F504} [cargarArchivoCalificaciones] Calificaciones cargadas - cache se invalidar\xE1 al guardar"),yield(yield this.toastController.create({message:"Archivo de calificaciones cargado",duration:2e3,color:"success",position:"top",cssClass:"toast-success"})).present()}catch(n){console.error("Error cargando calificaciones:",n),yield(yield this.toastController.create({message:"Error al cargar archivo de calificaciones",duration:3e3,color:"danger",position:"top",cssClass:"toast-danger"})).present()}})}parsearCalificacionesCanvasLocal(t){let e=t.split(`
`).filter(n=>n.trim());if(e.length<3)return[];let i=[];for(let n=2;n<e.length;n++){let r=this.parseCSVRow(e[n]);r.length>=7&&i.push({id:r[1]||"",e1:r[4]||"",e2:r[5]||"",ef:r[6]||""})}return i}parseCSVRow(t){let e=[],i="",n=!1,r=0;for(;r<t.length;){let g=t[r];if(g==='"'&&(r===0||t[r-1]===","))n=!0;else if(g==='"'&&n&&(r===t.length-1||t[r+1]===","))n=!1;else if(g===","&&!n){e.push(i.trim()),i="",r++;continue}else i+=g;r++}return e.push(i.trim()),e}parsearCalificaciones(t){let e=t.split(`
`).filter(h=>h.trim());if(e.length<2)return;let i=h=>this.parseCSVRow(h),n=i(e[0]),r=e.slice(1).filter(h=>{let L=i(h)[0]?.trim().toLowerCase()||"";return!L.includes("points possible")&&L!==""}),g=n.findIndex(h=>h.toLowerCase().trim()==="student"||h.toLowerCase().trim()==="nombre"),f=n.findIndex(h=>h.toLowerCase().trim()==="sis login id"||h.toLowerCase().trim()==="login_id"),v=n.findIndex(h=>h.toLowerCase().trim()==="section"||h.toLowerCase().trim()==="secciones");this.calificacionesParseadas=r.map(h=>{let N=i(h),L={nombre:N[g]||"",correo:N[f]||"",seccion:N[v]||"",calificaciones:{}};for(let R=4;R<Math.min(N.length,n.length);R++){let q=n[R],D=N[R],P=q.toLowerCase().trim();if(P.includes("current points")||P.includes("final points")||P.includes("current score")||P.includes("final score")||P.includes("unposted")||P.includes("solo lectura")||P.includes("tareas current")||P.includes("tareas final")||P.includes("tareas unposted")||P.includes("herramientas profesor")||P==="notas")continue;q.trim()!==""&&(P.includes("entrega")||P.includes("proyecto")||P.includes("escenario")||P.includes("sustentacion"))&&(L.calificaciones[q]=D||"")}return L})}guardarCurso(){return F(this,null,function*(){if(!this.cursoParseado||this.estudiantesCargados.length===0){yield(yield this.toastController.create({message:"Debe cargar al menos el archivo de estudiantes",duration:3e3,color:"warning",position:"top",cssClass:"toast-warning"})).present();return}if(!this.cursoParseado.codigo){yield(yield this.toastController.create({message:"No se pudo detectar el c\xF3digo del curso. Por favor, renombre el archivo con formato: CODIGOB##.csv (ej: EPMB01.csv)",duration:4e3,color:"warning",position:"top",cssClass:"toast-warning"})).present();return}try{let t=this.estudiantesCargados.map(n=>({canvasUserId:n.canvasUserId||"",canvasGroupId:n.canvasGroupId||"",apellidos:n.apellidos||n.apellido||"",nombres:n.nombres||n.nombre||"",correo:n.correo||"",grupo:n.grupo||"",groupName:n.groupName||""})),e;if(this.codigoCursoEnEdicion){e=this.codigoCursoEnEdicion,yield this.dataService.actualizarEstudiantesCurso(e,t);let g=this.dataService.getUIState().courseStates?.[e]?.metadata;yield this.dataService.updateCourseState(e,{metadata:{nombre:this.cursoParseado.nombre,codigo:this.cursoParseado.codigo,bloque:this.cursoParseado.bloque,fechaCreacion:g?.fechaCreacion||new Date().toISOString(),profesor:g?.profesor||"",nombreAbreviado:g?.nombreAbreviado,codigoUnico:g?.codigoUnico}})}else e=yield this.dataService.crearCurso({nombre:this.cursoParseado.nombre,codigo:this.cursoParseado.codigo,bloque:this.cursoParseado.bloque,fechaCreacion:new Date().toISOString(),profesor:"",estudiantes:t});this.calificacionesCargadas&&(yield this.dataService.updateCourseState(e,{archivoCalificaciones:this.calificacionesCargadas})),this.cargarCursos(),this.limpiarFormulario(),this.modoEdicion=!1,this.cursoSeleccionado=null,yield(yield this.toastController.create({message:"Curso guardado exitosamente",duration:2e3,color:"success",position:"top",icon:"save"})).present()}catch(t){console.error("Error guardando curso:",t),yield(yield this.toastController.create({message:"Error al guardar curso",duration:3e3,color:"danger",position:"top",icon:"alert-circle"})).present()}})}cancelarEdicion(){return F(this,null,function*(){let e=!this.codigoCursoEnEdicion?"Creaci\xF3n de nuevo curso cancelada":"Edici\xF3n cancelada";this.modoEdicion=!1,this.cursoSeleccionado=null,this.limpiarFormulario(),yield(yield this.toastController.create({message:e,duration:2e3,color:"warning",position:"top",cssClass:"toast-warning"})).present()})}limpiarFormulario(){this.estudiantesFileName="",this.calificacionesFileName="",this.rubricaFileName="",this.estudiantesCargados=[],this.calificacionesCargadas=null,this.rubricaCargada=null,this.cursoParseado=null,this.codigoCursoEnEdicion="",this.estudiantesFileInput&&(this.estudiantesFileInput.nativeElement.value=""),this.calificacionesFileInput&&(this.calificacionesFileInput.nativeElement.value=""),this.rubricaFileInput&&(this.rubricaFileInput.nativeElement.value="")}desvincularArchivoEstudiantes(){this.estudiantesFileName="",this.estudiantesCargados=[],this.cursoParseado=null}desvincularArchivoCalificaciones(){this.calificacionesFileName="",this.calificacionesCargadas=null}eliminarCurso(t,e){return F(this,null,function*(){e.stopPropagation(),yield(yield this.alertController.create({header:"\u26A0\uFE0F Confirmar Eliminaci\xF3n de Curso",message:`\xBFEst\xE1s seguro de eliminar el curso "${t.nombre}" (${t.nombreAbreviado})?<br><br><strong>Se eliminar\xE1n:</strong><br>\u2022 Todos los estudiantes del curso<br>\u2022 Todas las evaluaciones asociadas<br>\u2022 Comentarios y seguimiento<br><br>Esta acci\xF3n no se puede deshacer.`,buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",role:"destructive",handler:()=>F(this,null,function*(){try{yield this.dataService.eliminarCurso(t.codigo),this.cargarCursos(),this.cursoSeleccionado===t.codigo&&this.deseleccionarCurso(),yield(yield this.toastController.create({message:`Curso "${t.nombreAbreviado}" eliminado`,duration:2e3,color:"success",position:"top",cssClass:"toast-success"})).present()}catch(n){console.error("Error eliminando curso:",n),yield(yield this.toastController.create({message:"Error al eliminar curso",duration:3e3,color:"danger",position:"top",cssClass:"toast-danger"})).present()}})}]})).present()})}convertirBloqueTextoANumero(t){return{PRIMER:1,PRIMERO:1,FIRST:1,SEGUNDO:2,SECOND:2,TERCER:3,TERCERO:3,THIRD:3,CUARTO:4,FOURTH:4,QUINTO:5,FIFTH:5,SEXTO:6,SIXTH:6}[t.toUpperCase()]||1}tieneArchivoCalificaciones(t){let i=this.dataService.getUIState().courseStates||{},n=Object.entries(i).find(([f,v])=>f===t);if(!n)return!1;let[r,g]=n;return this.dataService.obtenerArchivoCalificaciones(r)!==null}obtenerNombreArchivoCalificaciones(t){let i=this.dataService.getUIState().courseStates||{};return Object.entries(i).find(([r,g])=>g.metadata?.codigo===t)?.[1].archivoCalificaciones?.nombre||""}eliminarArchivoCalificacionesGuardado(){return F(this,null,function*(){if(!this.codigoCursoEnEdicion)return;let e=this.dataService.getUIState().courseStates||{},i=Object.entries(e).find(([n,r])=>r.metadata?.codigo===this.codigoCursoEnEdicion);if(i){let[n,r]=i;yield this.dataService.updateCourseState(n,{archivoCalificaciones:void 0}),yield(yield this.toastController.create({message:"Archivo de calificaciones eliminado",duration:2e3,color:"success",position:"top",cssClass:"toast-success"})).present()}})}leerArchivo(t){return new Promise((e,i)=>{let n=new FileReader;n.onload=r=>e(r.target?.result),n.onerror=()=>i(new Error("Error leyendo archivo")),n.readAsText(t)})}onRubricaFileSelected(t){return F(this,null,function*(){let e=t.target;if(!e.files||e.files.length===0)return;let i=e.files[0];if(this.rubricaFileName=i.name,!i.name.endsWith(".txt")){yield(yield this.toastController.create({message:"Solo se permiten archivos .txt",duration:2e3,color:"warning",position:"top",cssClass:"toast-warning"})).present();return}try{let n=yield this.leerArchivo(i),r=this.dataService.parsearArchivoRubrica(n);if(!r){yield(yield this.toastController.create({message:"Error al parsear el archivo de r\xFAbrica",duration:3e3,color:"danger",position:"top",cssClass:"toast-danger"})).present();return}this.rubricaCargada=r,yield(yield this.toastController.create({message:`R\xFAbrica "${r.nombre}" cargada exitosamente`,duration:2e3,color:"success",position:"top",cssClass:"toast-success"})).present()}catch(n){console.error("Error cargando r\xFAbrica:",n),yield(yield this.toastController.create({message:"Error al cargar archivo de r\xFAbrica",duration:3e3,color:"danger",position:"top",cssClass:"toast-danger"})).present()}})}guardarRubrica(){return F(this,null,function*(){if(!this.rubricaCargada){yield(yield this.toastController.create({message:"No hay r\xFAbrica para guardar",duration:2e3,color:"warning",position:"top",cssClass:"toast-warning"})).present();return}try{yield this.dataService.guardarRubrica(this.rubricaCargada),yield(yield this.toastController.create({message:`R\xFAbrica "${this.rubricaCargada.nombre}" guardada exitosamente`,duration:2e3,color:"success",position:"top",cssClass:"toast-success"})).present(),this.rubricaCargada=null,this.rubricaFileName="",this.rubricaFileInput&&(this.rubricaFileInput.nativeElement.value="")}catch(t){console.error("Error guardando r\xFAbrica:",t),yield(yield this.toastController.create({message:"Error al guardar la r\xFAbrica",duration:3e3,color:"danger",position:"top",cssClass:"toast-danger"})).present()}})}desvincularArchivoRubrica(){this.rubricaFileName="",this.rubricaCargada=null,this.rubricaFileInput&&(this.rubricaFileInput.nativeElement.value="")}obtenerColumnasCalificaciones(){return this.calificacionesParseadas.length===0?[]:Object.keys(this.calificacionesParseadas[0]?.calificaciones||{})}verCalificaciones(t){console.log("Ver calificaciones:",t)}exportarCalificaciones(t){return F(this,null,function*(){let i=this.dataService.getUIState().courseStates||{},n=Object.entries(i).find(([r,g])=>g.metadata?.codigo===t);if(n&&n[1].archivoCalificaciones){let r=n[1].archivoCalificaciones,g=new Blob([r.contenidoOriginal],{type:"text/csv"}),f=window.URL.createObjectURL(g),v=document.createElement("a");v.href=f,v.download=`calificaciones_${t}.csv`,v.click(),window.URL.revokeObjectURL(f),yield(yield this.toastController.create({message:"Calificaciones exportadas",duration:2e3,color:"success",position:"top",cssClass:"toast-success"})).present()}})}};C.\u0275fac=function(e){return new(e||C)},C.\u0275cmp=de({type:C,selectors:[["app-cursos"]],viewQuery:function(e,i){if(e&1&&(J(ht,5),J(_t,5),J(xt,5)),e&2){let n;K(n=ee())&&(i.estudiantesFileInput=n.first),K(n=ee())&&(i.calificacionesFileInput=n.first),K(n=ee())&&(i.rubricaFileInput=n.first)}},decls:21,vars:5,consts:[["estudiantesFileInput",""],["calificacionesFileInput",""],[3,"fullscreen"],[1,"page-container"],[1,"grid-principal-responsive"],[1,"cuadrante-card"],[1,"ion-no-padding"],[1,"ion-align-items-start"],["size","12","size-md","8",1,"ion-align-self-start"],[1,"title-no-margin"],["name","library"],["size","12","size-md","12",1,"ion-padding-vertical"],["size","12","size-md","4",1,"ion-align-self-center","ion-text-end"],[1,"action-bar"],[1,"action-btn-square"],[1,"card-content-full-flex"],[1,"cursos-scroll-container"],[1,"empty-state"],["lines","full"],[1,"import-container"],[1,"import-item",3,"click"],["type","file","accept",".csv","aria-label","Personas",1,"display-none",3,"change"],[1,"import-top"],["name","people-outline"],["name","cloud-upload-outline",1,"upload-icon"],[1,"import-bottom"],[1,"no-file"],["type","file","accept",".csv","aria-label","Calificaciones",1,"display-none",3,"change"],["name","stats-chart-outline"],[1,"filename"],["name","close-circle",1,"close-icon-small",3,"click"],[1,"filename","saved"],["color","success"],[1,"action-btn-square",3,"click"],["slot","start","name","add-circle-outline"],["color","medium",1,"action-btn-square",3,"click"],["slot","start","name","close-outline"],["color","success",1,"action-btn-square",3,"click"],["slot","start","name","save-outline"],["button","",3,"click"],[1,"curso-info-wrapper"],[1,"curso-main-info"],[1,"curso-code"],[1,"curso-meta-row"],[1,"curso-fecha"],["name","calendar-outline","size","small"],["side","end"],["color","warning",3,"click"],["slot","icon-only","name","create-outline"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[1,"rubricas-asociadas-section"],[1,"metadata-section"],[1,"section-header-custom"],["name","document-text-outline","color","primary"],["color","primary",1,"count-badge"],["lines","full",1,"rubricas-list-ionic"],[1,"rubrica-item-custom"],[1,"metadata-divider"],["name","ribbon-outline","slot","start",3,"color"],[1,"rubrica-item-header"],["color","success",1,"puntos-badge"],[1,"rubrica-item-details"],["color","warning",1,"rubrica-chip"],[1,"rubrica-chip",3,"color"],["slot","start",3,"name"],["color","tertiary",1,"rubrica-chip"],["name","calendar","slot","start"],["name","school","slot","start"],[1,"metadata-header"],["name","school-outline"],[1,"metadata-container"],[1,"metadata-grid"],[1,"metadata-label"]],template:function(e,i){e&1&&(a(0,"ion-content",2)(1,"div",3)(2,"div",4)(3,"ion-card",5)(4,"ion-card-header")(5,"ion-grid",6)(6,"ion-row",7)(7,"ion-col",8)(8,"ion-card-title",9),b(9,"ion-icon",10),m(10," Cursos "),c()(),A(11,St,25,6,"ion-col",11),a(12,"ion-col",12)(13,"div",13),A(14,yt,3,0,"ion-button",14)(15,It,6,0),c()()()()(),a(16,"ion-card-content",15)(17,"div",16),A(18,kt,3,0,"div",17)(19,At,3,0,"ion-list",18),c()()(),A(20,Rt,4,2,"ion-card",5),c()()()),e&2&&(Q("fullscreen",!0),u(11),T(i.modoEdicion?11:-1),u(3),T(i.modoEdicion?15:14),u(4),T(i.cursosDisponibles.length===0?18:19),u(2),T(i.cursoSeleccionado||i.modoEdicion?20:-1))},dependencies:[Ce,fe,ve,xe,Pe,Oe,be,_e,Ee,Ae,we,Le,he,Fe,Se,ze,Me,ke,Ie,ye,ge],styles:["ion-content[_ngcontent-%COMP%]{--background: #f8f9fa}.page-container[_ngcontent-%COMP%]{padding:9.6px;width:100%;height:100%}@media (max-width: 768px){.page-container[_ngcontent-%COMP%]{padding:4.8px;height:auto;min-height:100%}}.grid-principal-responsive[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:9.6px;width:100%;height:100%}@media (min-width: 1200px){.grid-principal-responsive[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}@media (max-width: 768px){.grid-principal-responsive[_ngcontent-%COMP%]{gap:7.2px}}.cuadrante-card[_ngcontent-%COMP%]{margin:0;height:fit-content;min-height:200px;max-height:calc(100vh - 120px);display:flex;flex-direction:column;border-radius:12px;min-width:0;max-width:100%;overflow:hidden}@media (max-width: 1200px){.cuadrante-card[_ngcontent-%COMP%]{max-height:calc(100vh - 140px)}}@media (max-width: 768px){.cuadrante-card[_ngcontent-%COMP%]{max-height:calc(100vh - 160px);border-radius:8px}}.cuadrante-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:9.6px;min-width:0}@media (max-width: 768px){.cuadrante-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:4.8px}}ion-card[_ngcontent-%COMP%]{width:100%;margin:0;max-width:100%}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--azul-oscuro) 0%,#0d2e47 100%);color:#fff;padding:12px;border-radius:7.2px 7.2px 0 0;text-align:left!important;display:block!important}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:#fff!important;font-weight:600;display:flex;align-items:center;justify-content:flex-start;gap:4.8px;min-width:130px;margin:0;font-size:.6rem;text-align:left}.display-none[_ngcontent-%COMP%]{display:none!important}ion-grid[_ngcontent-%COMP%]{--ion-grid-padding: 0;text-align:left}ion-row[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:flex-start;gap:0}ion-col[_ngcontent-%COMP%]{padding:0;text-align:left}.header-flex[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:9.6px;width:100%;flex-wrap:wrap}@media (max-width: 768px){.header-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}.header-left-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14.4px;flex:1;min-width:0}@media (max-width: 768px){.header-left-section[_ngcontent-%COMP%]{width:100%}}.title-no-margin[_ngcontent-%COMP%]{margin:0;color:#fff!important}.action-bar[_ngcontent-%COMP%]{display:inline-flex;gap:4.8px;margin:0 0 0 auto;padding:4.8px 7.2px;background:#fff;border-radius:4.8px;box-shadow:0 .6px 1.8px #0f385a14;flex-wrap:wrap;align-items:center;justify-content:flex-end;position:relative}@media (max-width: 768px){.action-bar[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:stretch}}.action-bar[_ngcontent-%COMP%]   .action-btn-square[_ngcontent-%COMP%]{--border-radius: 4.8px;--padding-start: 7.2px;--padding-end: 7.2px;--color: white;--background: var(--azul-oscuro);height:24px;min-height:24px;min-width:104px;margin:0;font-size:.51rem;font-weight:600;text-transform:none;letter-spacing:.18px;white-space:nowrap;flex-shrink:0}@media (max-width: 768px){.action-bar[_ngcontent-%COMP%]   .action-btn-square[_ngcontent-%COMP%]{flex:1;min-width:72px}}.action-bar[_ngcontent-%COMP%]   .action-btn-square[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:10.8px;color:#fff;margin-right:3.6px}.action-bar[_ngcontent-%COMP%]   .action-btn-square.btn-edit[_ngcontent-%COMP%]{--background: var(--naranja);--color: white}.action-bar[_ngcontent-%COMP%]   .action-btn-square[_ngcontent-%COMP%]:hover:not([disabled]){transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.action-bar[_ngcontent-%COMP%]   .action-btn-square[disabled][_ngcontent-%COMP%]{opacity:.4}.curso-nombre-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2.4px}.curso-nombre-container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:8.4px;color:var(--ion-text-color)}.curso-nombre-container[_ngcontent-%COMP%]   .codigo-abreviado[_ngcontent-%COMP%]{font-size:6.6px;color:var(--ion-color-medium);font-family:Courier New,monospace;font-weight:500}.curso-nombre-container[_ngcontent-%COMP%]   .codigo-curso-text[_ngcontent-%COMP%]{font-size:7.2px;color:var(--azul-oscuro);font-family:Courier New,monospace;font-weight:600;padding:2.4px 4.8px;border-radius:2.4px;background:transparent}ion-list[_ngcontent-%COMP%]{background:transparent;padding:0}ion-item[_ngcontent-%COMP%]{--background: #ffffff;--border-color: rgba(15, 56, 90, .08);--padding-start: 9.6px;--padding-end: 9.6px;--min-height: 48px;margin-bottom:4.8px;border-radius:4.8px;transition:all .3s ease;cursor:pointer}ion-item[_ngcontent-%COMP%]:hover{--background: rgba(31, 178, 222, .04);transform:translate(2px);box-shadow:0 2px 8px #0f385a14}ion-item.item-selected[_ngcontent-%COMP%]{--background: linear-gradient(135deg, rgba(31, 178, 222, .08) 0%, rgba(31, 178, 222, .12) 100%);border-left:2.4px solid var(--azul-claro)}ion-item.item-selected[_ngcontent-%COMP%]:hover{--background: linear-gradient(135deg, rgba(31, 178, 222, .12) 0%, rgba(31, 178, 222, .16) 100%)}ion-item[_ngcontent-%COMP%]   .curso-info-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4.8px;width:100%}ion-item[_ngcontent-%COMP%]   .curso-main-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.6rem;font-weight:600;color:var(--azul-oscuro);margin-bottom:3.6px}ion-item[_ngcontent-%COMP%]   .curso-main-info[_ngcontent-%COMP%]   .curso-code[_ngcontent-%COMP%]{font-size:.51rem;color:var(--texto-secundario);margin:0}ion-item[_ngcontent-%COMP%]   .curso-main-info[_ngcontent-%COMP%]   .curso-code[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700;color:var(--azul-oscuro)}ion-item[_ngcontent-%COMP%]   .curso-meta-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:7.2px;flex-wrap:wrap}ion-item[_ngcontent-%COMP%]   .curso-meta-row[_ngcontent-%COMP%]   .curso-fecha[_ngcontent-%COMP%]{font-size:.51rem;color:var(--texto-secundario);display:flex;align-items:center;gap:3.6px;margin:0}ion-item[_ngcontent-%COMP%]   .curso-meta-row[_ngcontent-%COMP%]   .curso-fecha[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:8.4px;color:var(--azul-claro)}ion-item[_ngcontent-%COMP%]   .curso-meta-row[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:.45rem;padding:2.4px 4.8px}ion-item-sliding[_ngcontent-%COMP%]   ion-item-options[_ngcontent-%COMP%]   ion-item-option[_ngcontent-%COMP%]{min-width:36px;display:flex;align-items:center;justify-content:center}ion-item-sliding[_ngcontent-%COMP%]   ion-item-options[_ngcontent-%COMP%]   ion-item-option[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.empty-state[_ngcontent-%COMP%]{padding:9px;color:var(--ion-color-medium)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:400;line-height:1.4}.estudiantes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .estudiantes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:12.6px;padding-right:12.6px}.rubrica-info[_ngcontent-%COMP%]{padding:7.2px;background:#f8f9fa;border-radius:4.8px;margin-top:4.8px;display:flex;flex-direction:column;gap:4.8px}.rubrica-info[_ngcontent-%COMP%]   .rubrica-nombre[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4.8px}.rubrica-info[_ngcontent-%COMP%]   .rubrica-nombre[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}.rubrica-info[_ngcontent-%COMP%]   .rubrica-nombre[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:8.4px;color:var(--azul-oscuro)}.rubrica-info[_ngcontent-%COMP%]   .rubrica-detalles[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4.8px;font-size:7.2px;color:var(--ion-color-medium);margin-left:16.8px}.rubrica-info[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:4.8px;--border-radius: 4.8px;height:21.6px;font-size:.51rem;font-weight:600}.import-container[_ngcontent-%COMP%]{display:flex;gap:7.2px;align-items:center;flex-wrap:wrap;flex:1;min-width:0}@media (max-width: 1024px){.import-container[_ngcontent-%COMP%]{gap:4.8px}}@media (max-width: 768px){.import-container[_ngcontent-%COMP%]{width:100%}}.import-container[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;flex-wrap:wrap;width:100%}@media (max-width: 768px){.import-container[_ngcontent-%COMP%]{gap:8px}}.import-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:12px 16px;border:2px dashed #ccc;border-radius:8px;cursor:pointer;transition:all .3s ease;min-width:180px;background:#fff;color:#000}.import-item[_ngcontent-%COMP%]:hover{border-color:var(--azul-medio);background:#f8f9fa}.import-item.has-file[_ngcontent-%COMP%]{border-color:#28a745;border-style:solid;background:#d4edda;color:#000}.import-item.has-file[_ngcontent-%COMP%]:hover{background:#c3e6cb}.import-item[_ngcontent-%COMP%]   .import-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:4px}.import-item[_ngcontent-%COMP%]   .import-top[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#000}.import-item[_ngcontent-%COMP%]   .import-top[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#000}.import-item[_ngcontent-%COMP%]   .import-top[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{margin-left:auto;font-size:18px;color:#000}.import-item[_ngcontent-%COMP%]   .import-bottom[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%}.import-item[_ngcontent-%COMP%]   .import-bottom[_ngcontent-%COMP%]   .filename[_ngcontent-%COMP%]{font-size:12px;color:#000;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}.import-item[_ngcontent-%COMP%]   .import-bottom[_ngcontent-%COMP%]   .filename.saved[_ngcontent-%COMP%]{color:#155724;font-weight:500}.import-item[_ngcontent-%COMP%]   .import-bottom[_ngcontent-%COMP%]   .no-file[_ngcontent-%COMP%]{font-size:12px;color:#666;font-style:italic}.import-item[_ngcontent-%COMP%]   .import-bottom[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{flex-shrink:0}.import-item[_ngcontent-%COMP%]   .import-bottom[_ngcontent-%COMP%]   .close-icon-small[_ngcontent-%COMP%]{font-size:18px;color:#dc3545;cursor:pointer;flex-shrink:0}.import-item[_ngcontent-%COMP%]   .import-bottom[_ngcontent-%COMP%]   .close-icon-small[_ngcontent-%COMP%]:hover{color:#c82333}.file-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:3.6px;padding:3.6px 6px;background:#fffffff2;border-radius:3.6px;font-size:6.6px;color:var(--azul-oscuro)}.file-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:first-child{font-size:9.6px;color:var(--verde)}.file-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:500}.file-badge[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{font-size:10.8px;color:var(--magenta);cursor:pointer;flex-shrink:0}.file-badge[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.file-badge[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:6px;padding:1.2px 3.6px}.file-badge.saved[_ngcontent-%COMP%]{background:#ffffffd9}.rubrica-preview-compact[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2.4px;padding:4.8px 6px;background:#fffffff2;border-radius:3.6px}.rubrica-preview-compact[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:7.2px;color:var(--azul-oscuro)}.rubrica-preview-compact[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:6.6px;color:var(--ion-color-medium)}.rubrica-preview-compact[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:2.4px;--border-radius: 3.6px;height:16.8px;font-size:.45rem}.cursos-scroll-container[_ngcontent-%COMP%]{width:100%;overflow:visible;padding:0}.table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto}@media (max-width: 768px){.table-container[_ngcontent-%COMP%]{overflow-x:scroll}}.estudiantes-table[_ngcontent-%COMP%]{width:100%;min-width:600px;table-layout:auto}@media (max-width: 768px){.estudiantes-table[_ngcontent-%COMP%]{min-width:500px;font-size:.85rem}}.estudiantes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .estudiantes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:250px}@media (max-width: 768px){.estudiantes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .estudiantes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px;max-width:150px}}.estudiantes-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{white-space:nowrap}.actions-buttons[_ngcontent-%COMP%]{display:flex;gap:4px;align-items:center;flex-wrap:nowrap}.actions-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex-shrink:0}.actions-buttons[_ngcontent-%COMP%]   ion-icon[name=checkmark-circle][_ngcontent-%COMP%], .actions-buttons[_ngcontent-%COMP%]   ion-icon[name=ellipse-outline][_ngcontent-%COMP%]{flex-shrink:0;font-size:18px}.card-content-full-flex[_ngcontent-%COMP%]{padding:12px;height:100%;display:flex;flex-direction:column}.rubricas-asociadas-section[_ngcontent-%COMP%]{margin-bottom:14.4px;padding:9.6px;background:linear-gradient(135deg,#f8f9fa,#fff);border-radius:7.2px;border:.6px solid #e9ecef;box-shadow:0 1.2px 4.8px #0000000d}@media (max-width: 768px){.rubricas-asociadas-section[_ngcontent-%COMP%]{padding:7.2px;margin-bottom:9.6px}}.section-header-custom[_ngcontent-%COMP%]{display:flex;align-items:center;gap:7.2px;margin-bottom:9.6px;padding-bottom:7.2px;border-bottom:1.2px solid var(--ion-color-primary)}.section-header-custom[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14.4px}@media (max-width: 768px){.section-header-custom[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:12px}}.section-header-custom[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{min-width:130px;margin:0;font-size:.66rem;font-weight:600;color:var(--azul-oscuro);flex:1}@media (max-width: 768px){.section-header-custom[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.6rem}}.section-header-custom[_ngcontent-%COMP%]   .count-badge[_ngcontent-%COMP%]{font-size:.54rem;font-weight:600;padding:2.4px 7.2px}@media (max-width: 768px){.section-header-custom[_ngcontent-%COMP%]   .count-badge[_ngcontent-%COMP%]{font-size:.48rem;padding:1.8px 6px}}.rubricas-list-ionic[_ngcontent-%COMP%]{background:transparent;padding:0;margin:0}.rubricas-list-ionic[_ngcontent-%COMP%]   .rubrica-item-custom[_ngcontent-%COMP%]{--background: white;--border-color: #e9ecef;--padding-start: 6px;--padding-end: 6px;--inner-padding-end: 0;margin-bottom:6px;border-radius:4.8px;box-shadow:0 .6px 2.4px #00000014;transition:all .3s ease}.rubricas-list-ionic[_ngcontent-%COMP%]   .rubrica-item-custom[_ngcontent-%COMP%]:hover{--background: #f8f9fa;box-shadow:0 1.2px 4.8px #0000001f;transform:translate(2.4px)}.rubricas-list-ionic[_ngcontent-%COMP%]   .rubrica-item-custom[_ngcontent-%COMP%]   ion-icon[slot=start][_ngcontent-%COMP%]{margin-right:7.2px;font-size:14.4px}@media (max-width: 768px){.rubricas-list-ionic[_ngcontent-%COMP%]   .rubrica-item-custom[_ngcontent-%COMP%]   ion-icon[slot=start][_ngcontent-%COMP%]{font-size:12px;margin-right:4.8px}}@media (max-width: 768px){.rubricas-list-ionic[_ngcontent-%COMP%]   .rubrica-item-custom[_ngcontent-%COMP%]{--padding-start: 4.8px;--padding-end: 4.8px;margin-bottom:4.8px}}.rubrica-item-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:4.8px;margin-bottom:3.6px}.rubrica-item-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{min-width:130px;margin:0;font-size:.54rem;font-weight:600;color:var(--azul-oscuro);flex:1;line-height:1.3}@media (max-width: 768px){.rubrica-item-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.51rem}}.rubrica-item-header[_ngcontent-%COMP%]   .puntos-badge[_ngcontent-%COMP%]{font-size:.48rem;font-weight:600;padding:2.4px 6px;display:flex;align-items:center;gap:1.8px;white-space:nowrap}.rubrica-item-header[_ngcontent-%COMP%]   .puntos-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:7.2px}@media (max-width: 768px){.rubrica-item-header[_ngcontent-%COMP%]   .puntos-badge[_ngcontent-%COMP%]{font-size:.42rem;padding:1.8px 4.8px}.rubrica-item-header[_ngcontent-%COMP%]   .puntos-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:6.6px}}.rubrica-item-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:3.6px;flex-wrap:wrap}.rubrica-item-details[_ngcontent-%COMP%]   .rubrica-chip[_ngcontent-%COMP%]{height:15.6px;font-size:.45rem;font-weight:500}.rubrica-item-details[_ngcontent-%COMP%]   .rubrica-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:8.4px}.rubrica-item-details[_ngcontent-%COMP%]   .rubrica-chip[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{min-width:130px;margin:0}@media (max-width: 768px){.rubrica-item-details[_ngcontent-%COMP%]   .rubrica-chip[_ngcontent-%COMP%]{height:13.2px;font-size:.42rem}.rubrica-item-details[_ngcontent-%COMP%]   .rubrica-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:7.2px}}.metadata-divider[_ngcontent-%COMP%]{margin:12px 0 9.6px;border:none;border-top:.6px solid #dee2e6}@media (max-width: 768px){.metadata-divider[_ngcontent-%COMP%]{margin:9.6px 0 7.2px}}.import-container[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;width:100%}.import-item[_ngcontent-%COMP%]{flex:1;min-width:150px;background:#f8f9fa;border:1.5px dashed #ccc;border-radius:8px;padding:12px;cursor:pointer;transition:all .2s ease;display:flex;flex-direction:column;align-items:center;justify-content:center}.import-item[_ngcontent-%COMP%]:hover{background:#eef1f6;border-color:var(--azul-oscuro)}.import-item.has-file[_ngcontent-%COMP%]{background:#f0fdf4;border-color:var(--ion-color-success);border-style:solid}.import-item[_ngcontent-%COMP%]   .import-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:6px;color:var(--azul-oscuro);font-weight:600;font-size:.9rem}.import-item[_ngcontent-%COMP%]   .import-top[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{color:var(--texto-secundario);font-size:1.1rem}.import-item[_ngcontent-%COMP%]   .import-bottom[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;width:100%}.import-item[_ngcontent-%COMP%]   .import-bottom[_ngcontent-%COMP%]   .filename[_ngcontent-%COMP%]{color:var(--ion-color-success);font-size:.8rem;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px}.import-item[_ngcontent-%COMP%]   .import-bottom[_ngcontent-%COMP%]   .no-file[_ngcontent-%COMP%]{color:var(--texto-secundario);font-size:.75rem;font-style:italic}.import-item[_ngcontent-%COMP%]   .import-bottom[_ngcontent-%COMP%]   .close-icon-small[_ngcontent-%COMP%]{color:var(--ion-color-danger);font-size:1.1rem;cursor:pointer}.import-item[_ngcontent-%COMP%]   .import-bottom[_ngcontent-%COMP%]   .close-icon-small[_ngcontent-%COMP%]:hover{transform:scale(1.1)}"]});let s=C;return s})();export{en as CursosPage};
