import{c as n,p as l}from"./chunk-OBFQNIQD.js";import{a}from"./chunk-RLOPVUMC.js";var g=(()=>{let o=class o{constructor(){this.grupoSeleccionadoSubject=new n(0),this.grupoVisualizadoSubject=new n(0),this.seguimientoActualSubject=new n(null),this.estadosEstudiantes=new Map,this.estadosEstudiantesSubject=new n(this.estadosEstudiantes),this.grupoSeleccionado$=this.grupoSeleccionadoSubject.asObservable(),this.grupoVisualizado$=this.grupoVisualizadoSubject.asObservable(),this.seguimientoActual$=this.seguimientoActualSubject.asObservable(),this.estadosEstudiantes$=this.estadosEstudiantesSubject.asObservable()}setGrupoSeleccionado(e){this.grupoSeleccionadoSubject.value!==e&&(this.grupoSeleccionadoSubject.next(e),this.grupoVisualizadoSubject.next(e))}forceSetGrupoSeleccionado(e){this.grupoSeleccionadoSubject.next(e),this.grupoVisualizadoSubject.next(e)}setGrupoVisualizado(e){this.grupoVisualizadoSubject.next(e)}getGrupoSeleccionado(){return this.grupoSeleccionadoSubject.value}getGrupoVisualizado(){return this.grupoVisualizadoSubject.value}setSeguimiento(e){this.seguimientoActualSubject.next(e)}getSeguimiento(){return this.seguimientoActualSubject.value}actualizarTextoRubrica(e,t,i){let s=this.seguimientoActualSubject.value;s&&(e==="PG"?(s.textoRubricaGrupal=t,i&&(s.timestampsGrupal=i)):(s.textoRubricaIndividual=t,i&&(s.timestampsIndividual=i)),this.seguimientoActualSubject.next(a({},s)))}actualizarEvaluacionRubrica(e,t){let i=this.seguimientoActualSubject.value;i&&(e==="PG"?i.evaluacionGrupal=t:i.evaluacionIndividual=t,this.seguimientoActualSubject.next(a({},i)))}agregarComentario(e){let t=this.seguimientoActualSubject.value;t&&(t.comentarios.push(e),this.seguimientoActualSubject.next(a({},t)))}agregarComentarios(e){let t=this.seguimientoActualSubject.value;t&&(t.comentarios.push(...e),this.seguimientoActualSubject.next(a({},t)))}actualizarComentario(e,t){let i=this.seguimientoActualSubject.value;if(i){let s=i.comentarios.find(u=>u.id===e);s&&(s.comentario=t,this.seguimientoActualSubject.next(a({},i)))}}eliminarComentario(e){let t=this.seguimientoActualSubject.value;t&&(t.comentarios=t.comentarios.filter(i=>i.id!==e),this.seguimientoActualSubject.next(a({},t)))}actualizarIntegranteSeleccionado(e){let t=this.seguimientoActualSubject.value;t&&(t.integranteSeleccionado=e||void 0,this.seguimientoActualSubject.next(a({},t)))}actualizarEntregaActual(e){let t=this.seguimientoActualSubject.value;t&&(t.entregaActual=e||void 0,this.seguimientoActualSubject.next(a({},t)))}actualizarTipoEvaluacionActiva(e){let t=this.seguimientoActualSubject.value;t&&(t.tipoEvaluacionActiva=e,this.seguimientoActualSubject.next(a({},t)))}getEstadosGrupoEntrega(e,t){this.estadosEstudiantes.has(e)||this.estadosEstudiantes.set(e,new Map);let i=this.estadosEstudiantes.get(e);return i.has(t)||i.set(t,{ok:new Set,solos:new Set,ausentes:new Set}),i.get(t)}setEstadoEstudiante(e,t,i,s){let u=this.getEstadosGrupoEntrega(e,t);u.ok.delete(i),u.solos.delete(i),u.ausentes.delete(i),s==="ok"?u.ok.add(i):s==="solo"?u.solos.add(i):s==="ausente"&&u.ausentes.add(i),this.estadosEstudiantesSubject.next(new Map(this.estadosEstudiantes))}getEstadoEstudiante(e,t,i){let s=this.estadosEstudiantes.get(e);if(!s)return null;let u=s.get(t);return u?u.ok.has(i)?"ok":u.solos.has(i)?"solo":u.ausentes.has(i)?"ausente":null:null}limpiarEstadosGrupoEntrega(e,t){let i=this.estadosEstudiantes.get(e);i&&(i.delete(t),this.estadosEstudiantesSubject.next(new Map(this.estadosEstudiantes)))}};o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"});let c=o;return c})();export{g as a};
