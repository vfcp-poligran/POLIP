<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>POLIProject - Parte 1.5: Ionic + Capacitor</title>
  <link rel="stylesheet" href="css/documentacion-tecnica.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>üì± POLIProject</h1>
      <p class="subtitle">Documentaci√≥n T√©cnica del C√≥digo Fuente</p>
      <span class="part-indicator">üì± Parte 1.5: Ionic + Capacitor</span>
    </header>

    <nav class="nav-parts">
      <a href="DOCUMENTACION-TECNICA-PARTE-1-1.html">1.1: Stack</a>
      <a href="DOCUMENTACION-TECNICA-PARTE-1-2.html">1.2: Dependencies</a>
      <a href="DOCUMENTACION-TECNICA-PARTE-1-3.html">1.3: TypeScript</a>
      <a href="DOCUMENTACION-TECNICA-PARTE-1-4.html">1.4: Angular</a>
      <a href="DOCUMENTACION-TECNICA-PARTE-1-5.html" class="active">1.5: Ionic+Capacitor</a>
      <a href="DOCUMENTACION-TECNICA-PARTE-2.html">Parte 2</a>
      <a href="DOCUMENTACION-TECNICA-PARTE-3-1.html">Parte 3</a>
    </nav>

    <!-- ============================================ -->
    <!-- IONIC CONFIG -->
    <!-- ============================================ -->
    <section class="section">
      <h2>üé® ionic.config.json</h2>

      <p>El <code>ionic.config.json</code> configura el CLI de Ionic para el proyecto:</p>

      <div class="file-header">üìÑ ionic.config.json</div>
      <div class="code-block">
        <code>
{
  <span class="property">"name"</span>: <span class="string">"gestor-proyectos"</span>,
  <span class="property">"integrations"</span>: {
    <span class="property">"capacitor"</span>: {}              <span class="comment">// Usa Capacitor (no Cordova)</span>
  },
  <span class="property">"type"</span>: <span class="string">"angular-standalone"</span>    <span class="comment">// Angular con standalone components</span>
}
        </code>
      </div>

      <div class="info-box">
        <strong>üí° ¬øPor qu√© "angular-standalone"?</strong><br>
        Indica que POLIProject usa el paradigma moderno de Angular 20 con componentes standalone (sin NgModules). Esto afecta qu√© schematics usa <code>ionic generate</code>.
      </div>

      <h3>‚ö° Comandos Ionic CLI</h3>

      <table class="config-table">
        <thead>
          <tr>
            <th>Comando</th>
            <th>Descripci√≥n</th>
            <th>Uso en POLIProject</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>ionic serve</code></td>
            <td>Servidor de desarrollo con hot reload</td>
            <td>Desarrollo diario en navegador</td>
          </tr>
          <tr>
            <td><code>ionic build</code></td>
            <td>Compila aplicaci√≥n web</td>
            <td>Genera www/ para deploy</td>
          </tr>
          <tr>
            <td><code>ionic g page</code></td>
            <td>Genera nueva p√°gina</td>
            <td>Crear CalificacionesPage, etc.</td>
          </tr>
          <tr>
            <td><code>ionic cap sync</code></td>
            <td>Sincroniza con nativos</td>
            <td>Prepara Android/iOS</td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- ============================================ -->
    <!-- CAPACITOR CONFIG -->
    <!-- ============================================ -->
    <section class="section">
      <h2>üì± capacitor.config.ts</h2>

      <p>El <code>capacitor.config.ts</code> configura el runtime nativo de Capacitor:</p>

      <div class="philosophy-box">
        <h4>üìê Filosof√≠a Capacitor: "Web-First, Native When Needed"</h4>
        <p>Capacitor ejecuta tu app web dentro de un WebView nativo, pero te da acceso a APIs nativas cuando lo necesitas:</p>
        <ul>
          <li><strong>Web-First:</strong> El c√≥digo principal es HTML/CSS/JS</li>
          <li><strong>Native Bridge:</strong> JavaScript llama a c√≥digo nativo via plugins</li>
          <li><strong>Progressive Enhancement:</strong> Funciona en web, mejora en nativo</li>
        </ul>
      </div>

      <h3>üéØ Configuraci√≥n Base</h3>

      <div class="file-header">üìÑ capacitor.config.ts</div>
      <div class="code-block">
        <code>
<span class="keyword">import</span> { <span class="property">CapacitorConfig</span> } <span class="keyword">from</span> <span class="string">'@capacitor/cli'</span>;

<span class="keyword">const</span> config: <span class="property">CapacitorConfig</span> = {
  <span class="property">appId</span>: <span class="string">'com.poligran.gestorproyectos'</span>,  <span class="comment">// Bundle ID √∫nico</span>
  <span class="property">appName</span>: <span class="string">'POLIProject'</span>,                 <span class="comment">// Nombre en launcher</span>
  <span class="property">webDir</span>: <span class="string">'www/browser'</span>,                 <span class="comment">// Carpeta de assets web</span>
};

<span class="keyword">export default</span> config;
        </code>
      </div>

      <div class="warning-box">
        <strong>‚ö†Ô∏è Importante:</strong> El <code>appId</code> (<code>com.poligran.gestorproyectos</code>) es el identificador √∫nico de la app en iOS App Store y Google Play. <strong>No debe cambiar</strong> despu√©s del primer deploy.
      </div>

      <h3>üåê Plataformas Soportadas</h3>

      <div class="platform-grid">
        <div class="platform-card">
          <div class="icon">üåê</div>
          <h4>Web (PWA)</h4>
          <p>Funciona en cualquier navegador moderno. Service Worker para offline.</p>
        </div>
        <div class="platform-card">
          <div class="icon">ü§ñ</div>
          <h4>Android</h4>
          <p>WebView en Android 5.0+. Acceso a SQLite, filesystem, c√°mara.</p>
        </div>
        <div class="platform-card">
          <div class="icon">üçé</div>
          <h4>iOS</h4>
          <p>WKWebView en iOS 13+. Integraci√≥n con sistema Apple.</p>
        </div>
      </div>
    </section>

    <!-- ============================================ -->
    <!-- CONFIGURACI√ìN POR PLATAFORMA -->
    <!-- ============================================ -->
    <section class="section">
      <h2>üéõÔ∏è Configuraci√≥n por Plataforma</h2>

      <h3>ü§ñ Configuraci√≥n Android</h3>

      <div class="file-header">üìÑ capacitor.config.ts - Android</div>
      <div class="code-block">
        <code>
<span class="property">android</span>: {
  <span class="property">allowMixedContent</span>: <span class="keyword">false</span>,             <span class="comment">// Bloquear HTTP en HTTPS</span>
  <span class="property">captureInput</span>: <span class="keyword">true</span>,                   <span class="comment">// Captura eventos teclado</span>
  <span class="property">webContentsDebuggingEnabled</span>: <span class="keyword">false</span>,   <span class="comment">// Desactivar en prod</span>
  <span class="property">minWebViewVersion</span>: <span class="number">60</span>,                <span class="comment">// Chrome 60+ requerido</span>
  <span class="property">backgroundColor</span>: <span class="string">'#0f385a'</span>,            <span class="comment">// Color de fondo nativo</span>
  <span class="property">overrideUserAgent</span>: <span class="string">'POLIProject-Android'</span>
}
        </code>
      </div>

      <h3>üçé Configuraci√≥n iOS</h3>

      <div class="file-header">üìÑ capacitor.config.ts - iOS</div>
      <div class="code-block">
        <code>
<span class="property">ios</span>: {
  <span class="property">contentInset</span>: <span class="string">'automatic'</span>,            <span class="comment">// Ajuste para notch</span>
  <span class="property">allowsLinkPreview</span>: <span class="keyword">false</span>,            <span class="comment">// Sin preview de links</span>
  <span class="property">backgroundColor</span>: <span class="string">'#0f385a'</span>,
  <span class="property">preferredContentMode</span>: <span class="string">'mobile'</span>,       <span class="comment">// Modo m√≥vil siempre</span>
  <span class="property">scrollEnabled</span>: <span class="keyword">true</span>
}
        </code>
      </div>

      <div class="project-box">
        <h4>üìã En POLIProject:</h4>
        <ul>
          <li><code>backgroundColor: '#0f385a'</code> - El azul corporativo del Polit√©cnico</li>
          <li><code>contentInset: 'automatic'</code> - Evita que contenido quede bajo el notch de iPhone</li>
          <li><code>webContentsDebuggingEnabled: false</code> - Seguridad en producci√≥n</li>
        </ul>
      </div>
    </section>

    <!-- ============================================ -->
    <!-- PLUGINS CAPACITOR -->
    <!-- ============================================ -->
    <section class="section">
      <h2>üîå Plugins de Capacitor</h2>

      <p>Los plugins proporcionan acceso a funcionalidades nativas:</p>

      <div class="file-header">üìÑ capacitor.config.ts - Plugins</div>
      <div class="code-block">
        <code>
<span class="property">plugins</span>: {
  <span class="property">SplashScreen</span>: {
    <span class="property">launchShowDuration</span>: <span class="number">2000</span>,          <span class="comment">// 2 segundos</span>
    <span class="property">backgroundColor</span>: <span class="string">'#0f385a'</span>,
    <span class="property">splashFullScreen</span>: <span class="keyword">true</span>,
    <span class="property">splashImmersive</span>: <span class="keyword">true</span>
  },
  <span class="property">StatusBar</span>: {
    <span class="property">style</span>: <span class="string">'DARK'</span>,                       <span class="comment">// Iconos claros</span>
    <span class="property">backgroundColor</span>: <span class="string">'#0f385a'</span>
  },
  <span class="property">Keyboard</span>: {
    <span class="property">resize</span>: <span class="string">'body'</span>,                      <span class="comment">// Redimensionar body</span>
    <span class="property">resizeOnFullScreen</span>: <span class="keyword">true</span>
  }
}
        </code>
      </div>

      <h3>üì¶ Plugins Usados en POLIProject</h3>

      <div class="plugin-card">
        <div class="plugin-icon">üñºÔ∏è</div>
        <div class="plugin-info">
          <h4>SplashScreen</h4>
          <p>Pantalla de carga con logo mientras la app inicializa. Muestra el azul corporativo por 2 segundos.</p>
        </div>
      </div>

      <div class="plugin-card">
        <div class="plugin-icon">üìä</div>
        <div class="plugin-info">
          <h4>StatusBar</h4>
          <p>Personaliza la barra de estado del sistema. En POLIProject: fondo azul con iconos claros.</p>
        </div>
      </div>

      <div class="plugin-card">
        <div class="plugin-icon">‚å®Ô∏è</div>
        <div class="plugin-info">
          <h4>Keyboard</h4>
          <p>Controla el teclado virtual. Redimensiona el contenido cuando aparece para evitar que oculte inputs.</p>
        </div>
      </div>

      <div class="plugin-card">
        <div class="plugin-icon">üìÅ</div>
        <div class="plugin-info">
          <h4>Filesystem</h4>
          <p>Lee/escribe archivos en el dispositivo. Usado para exportar CSVs y backups de datos.</p>
        </div>
      </div>

      <div class="plugin-card">
        <div class="plugin-icon">üóÑÔ∏è</div>
        <div class="plugin-info">
          <h4>SQLite (Community)</h4>
          <p>Base de datos SQL nativa. Almacena cursos, estudiantes, evaluaciones y r√∫bricas offline.</p>
        </div>
      </div>
    </section>

    <!-- ============================================ -->
    <!-- CICLO DE SINCRONIZACI√ìN -->
    <!-- ============================================ -->
    <section class="section">
      <h2>üîÑ Ciclo de Sincronizaci√≥n</h2>

      <p>El proceso para actualizar las apps nativas con c√≥digo nuevo:</p>

      <div class="sync-flow">
        <div class="sync-step">
          <div class="icon">üìù</div>
          <div class="label">Editar C√≥digo</div>
          <div class="sublabel">src/app/</div>
        </div>
        <div class="sync-arrow">‚Üí</div>
        <div class="sync-step">
          <div class="icon">üî®</div>
          <div class="label">Build</div>
          <div class="sublabel">ionic build</div>
        </div>
        <div class="sync-arrow">‚Üí</div>
        <div class="sync-step">
          <div class="icon">üì¶</div>
          <div class="label">www/</div>
          <div class="sublabel">Assets web</div>
        </div>
        <div class="sync-arrow">‚Üí</div>
        <div class="sync-step">
          <div class="icon">üîÑ</div>
          <div class="label">Sync</div>
          <div class="sublabel">cap sync</div>
        </div>
        <div class="sync-arrow">‚Üí</div>
        <div class="sync-step">
          <div class="icon">üì±</div>
          <div class="label">Nativos</div>
          <div class="sublabel">android/, ios/</div>
        </div>
      </div>

      <div class="file-header">üìÑ Comandos de sincronizaci√≥n</div>
      <div class="code-block">
        <code>
<span class="comment"># 1. Compilar c√≥digo web (genera www/)</span>
ionic build --prod

<span class="comment"># 2. Copiar www/ a proyectos nativos + instalar plugins</span>
npx cap sync

<span class="comment"># 3. Abrir en IDE nativo para compilar/depurar</span>
npx cap open android  <span class="comment"># Abre Android Studio</span>
npx cap open ios      <span class="comment"># Abre Xcode</span>

<span class="comment"># Shortcut: Todo en un comando</span>
npm run build:all     <span class="comment"># Ejecuta scripts/build-all-platforms.ps1</span>
        </code>
      </div>

      <div class="analogy-box">
        <h4>üì¶ Analog√≠a: El Sistema de Env√≠os</h4>
        <p><code>cap sync</code> es como un servicio de paqueter√≠a:</p>
        <ul>
          <li><strong>www/</strong> es el paquete que enviamos</li>
          <li><strong>cap sync</strong> lo empaca y lo env√≠a a dos destinos</li>
          <li><strong>android/</strong> y <strong>ios/</strong> son las oficinas de destino</li>
        </ul>
        <p class="mt-10">Cada oficina tiene su propio sistema (Gradle/Xcode) para procesar el paquete.</p>
      </div>
    </section>

    <!-- ============================================ -->
    <!-- RESUMEN PARTE 1 -->
    <!-- ============================================ -->
    <section class="section">
      <h2>üìù Resumen de Configuraci√≥n Ionic + Capacitor</h2>

      <table class="config-table">
        <thead>
          <tr>
            <th>Archivo</th>
            <th>Prop√≥sito</th>
            <th>Impacto en POLIProject</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>ionic.config.json</code></td>
            <td>Configuraci√≥n CLI Ionic</td>
            <td>Define tipo angular-standalone</td>
          </tr>
          <tr>
            <td><code>capacitor.config.ts</code></td>
            <td>Configuraci√≥n runtime nativo</td>
            <td>appId, plugins, colores</td>
          </tr>
          <tr>
            <td><code>android/</code></td>
            <td>Proyecto Android Studio</td>
            <td>Build para Google Play</td>
          </tr>
          <tr>
            <td><code>ios/</code></td>
            <td>Proyecto Xcode</td>
            <td>Build para App Store</td>
          </tr>
        </tbody>
      </table>
    </section>

    <!-- ============================================ -->
    <!-- BANNER DE COMPLETACI√ìN -->
    <!-- ============================================ -->
    <div class="completion-banner">
      <h3>üéâ ¬°Parte 1 Completa!</h3>
      <p>Has completado la documentaci√≥n de configuraci√≥n de POLIProject.</p>
      <p class="mt-15 text-sm">
        1.1 Stack &nbsp;|&nbsp;
        1.2 Dependencies &nbsp;|&nbsp;
        1.3 TypeScript &nbsp;|&nbsp;
        1.4 Angular &nbsp;|&nbsp;
        1.5 Ionic+Capacitor
      </p>
    </div>

    <!-- ============================================ -->
    <!-- GLOSARIO -->
    <!-- ============================================ -->
    <section class="section">
      <h2>üìñ Glosario de T√©rminos</h2>

      <table class="config-table">
        <thead>
          <tr>
            <th>T√©rmino</th>
            <th>Definici√≥n</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>WebView</strong></td>
            <td>Componente nativo que renderiza contenido web. Capacitor ejecuta tu app dentro de un WebView.</td>
          </tr>
          <tr>
            <td><strong>Plugin</strong></td>
            <td>M√≥dulo que expone funcionalidad nativa a JavaScript. Ejemplo: @capacitor/filesystem.</td>
          </tr>
          <tr>
            <td><strong>Bundle ID</strong></td>
            <td>Identificador √∫nico de la app en stores (com.poligran.gestorproyectos).</td>
          </tr>
          <tr>
            <td><strong>cap sync</strong></td>
            <td>Comando que copia www/ a nativos e instala/actualiza plugins.</td>
          </tr>
          <tr>
            <td><strong>PWA</strong></td>
            <td>Progressive Web App: app web instalable con capacidades offline.</td>
          </tr>
          <tr>
            <td><strong>Service Worker</strong></td>
            <td>Script que intercepta requests para funcionalidad offline en PWAs.</td>
          </tr>
        </tbody>
      </table>
    </section>

    <footer>
      <p><strong>POLIProject</strong> - Documentaci√≥n T√©cnica</p>
      <p>Parte 1.5 de 5 (Final de Parte 1) | Polit√©cnico Grancolombiano</p>
      <p class="mt-10">
        <a href="DOCUMENTACION-TECNICA-PARTE-1-4.html">‚Üê Anterior: 1.4 Angular</a>
        &nbsp;|&nbsp;
        <a href="DOCUMENTACION-TECNICA-PARTE-2.html">Siguiente: Parte 2 - Estructura ‚Üí</a>
      </p>
    </footer>
  </div>
</body>
</html>