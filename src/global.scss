/*
 * App Global CSS
 * ----------------------------------------------------------------------------
 * Put style rules here that you want to apply globally. These styles are for
 * the entire app and not just one component. Additionally, this file can be
 * used as an entry point to import other CSS/Sass files to be included in the
 * output CSS.
 * For more information on global stylesheets, visit the documentation:
 * https://ionicframework.com/docs/layout/global-stylesheets
 */

/* Core CSS required for Ionic components to work properly */
@import "@ionic/angular/css/core.css";

/* Basic CSS for apps built with Ionic */
@import "@ionic/angular/css/normalize.css";
@import "@ionic/angular/css/structure.css";
@import "@ionic/angular/css/typography.css";
@import "@ionic/angular/css/display.css";

/* Optional CSS utils that can be commented out */
@import "@ionic/angular/css/padding.css";
@import "@ionic/angular/css/float-elements.css";
@import "@ionic/angular/css/text-alignment.css";
@import "@ionic/angular/css/text-transformation.css";
@import "@ionic/angular/css/flex-utils.css";

/* ============================================================
   REGLA GLOBAL ANTI-BLOQUEO Z-INDEX - SOLUCIÓN DEFINITIVA
   ============================================================ */

/* Garantizar que componentes de página NUNCA estén bloqueados */
app-inicio, app-cursos, app-gestion-cursos,
app-rubricas, app-calificaciones, app-sistema {
  position: relative !important;
  z-index: auto !important; /* Reset - permite interacción */
  pointer-events: auto !important;

  /* Todos los elementos dentro también deben ser accesibles */
  * {
    pointer-events: auto !important;
  }

  /* Forzar que todos los botones, inputs, cards sean clicables */
  ion-button, ion-input, ion-card, ion-item,
  ion-fab-button, ion-select, ion-checkbox,
  ion-radio, ion-toggle, ion-searchbar,
  button, input, a, textarea, select {
    pointer-events: auto !important;
    cursor: pointer !important;
  }
}

/* Contenedores de contenido deben permitir interacción */
.page-container, .content-area, ion-router-outlet {
  pointer-events: auto !important;
  position: relative !important;
}

/* Asegurar que el contenido principal nunca bloquee */
ion-router-outlet, ion-router-outlet > * {
  z-index: auto !important;
  pointer-events: auto !important;
}

/**
 * Ionic Dark Mode
 * -----------------------------------------------------
 * For more info, please see:
 * https://ionicframework.com/docs/theming/dark-mode
 */

/**
 * Gestor de Proyectos - Custom Styles
 * ----------------------------------------------------------------------------
 * Estilos globales para la aplicación según especificaciones del SRS
 */

/* Importar fuentes de Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&family=Montserrat:wght@700;900&display=swap');

/* ========================================
   VARIABLES RESPONSIVE GLOBALES
   Sistema unificado para todo el proyecto
   ======================================== */

:root {
  /* Sistema de fuentes responsive con clamp() - escala automática */
  --fs-xs: clamp(0.7rem, 1.8vw, 0.75rem);
  --fs-sm: clamp(0.8rem, 2.2vw, 0.85rem);
  --fs-md: clamp(0.85rem, 2.5vw, 0.9rem);
  --fs-lg: clamp(0.95rem, 3vw, 1rem);
  --fs-xl: clamp(1rem, 3.5vw, 1.1rem);
  --fs-xxl: clamp(1.1rem, 4vw, 1.2rem);

  /* Espaciado responsive - se adapta al viewport */
  --spacing-xs: clamp(2px, 0.5vw, 4px);
  --spacing-sm: clamp(4px, 1vw, 8px);
  --spacing-md: clamp(8px, 2vw, 12px);
  --spacing-lg: clamp(12px, 2.5vw, 16px);
  --spacing-xl: clamp(16px, 3vw, 20px);

  /* Tamaños de componentes responsive */
  --card-padding: clamp(8px, 2vw, 16px);
  --button-height: clamp(36px, 8vw, 44px);
  --badge-size: clamp(0.65rem, 2vw, 0.75rem);
  --chip-height: clamp(24px, 5vw, 28px);

  /* Radios */
  --rad-sm: 8px;
  --rad-xs: 4px;

  /* Sombras */
  --shadow-light: 0 2px 4px rgba(0, 0, 0, 0.1);
  --shadow-medium: 0 4px 8px rgba(0, 0, 0, 0.15);

  /* Variables dinámicas para íconos */
  --icon-size-fab: clamp(1.1rem, 3vw, 1.4rem);
  --icon-size-button: clamp(0.9rem, 2.5vw, 1.1rem);
  --fab-size: clamp(48px, 10vw, 56px);

  /* Tamaños de items en listas */
  --list-item-height: clamp(44px, 10vw, 60px);
  --list-item-compact: clamp(32px, 7vw, 40px);

  /* Input heights */
  --input-height: clamp(40px, 9vw, 48px);
  --input-height-sm: clamp(36px, 8vw, 42px);
}

/* Reset global para eliminar espacios superiores */
html,
body {
  margin: 0 !important;
  padding: 0 !important;
  height: 100%;
  overflow-x: hidden;
}

ion-app {
  margin: 0 !important;
  padding: 0 !important;
}

/* Configuración global de tipografía */
* {
  font-family: var(--font-web, 'Open Sans', sans-serif);
}

h1,
h2,
h3,
h4,
h5,
h6,
.header-text,
.title-text,
ion-title,
ion-segment-button,
ion-button {
  font-family: var(--font-principal, 'Montserrat', sans-serif) !important;
  font-weight: 700;
}

/* ============================================================================
 * FIX: Eliminar padding/margin problemático de ion-page
 * ============================================================================ */
ion-page {
  padding: 0 !important;
  margin: 0 !important;
}

/* Reset para elementos con _ngcontent que puedan tener padding/margin */
[class*="_ngcontent-"],
[class*="_nghost-"] {
  padding: 0;
  margin: 0;
}

/* Asegurar que ion-tabs no tenga espacios */
ion-tabs[class*="_ngcontent-"],
ion-tabs[class*="_nghost-"] {
  padding: 0 !important;
  margin: 0 !important;
}

/* Asegurar que ion-router-outlet no tenga espacios extra */
ion-router-outlet[class*="_ngcontent-"],
ion-router-outlet[class*="_nghost-"] {
  padding: 0 !important;
  margin: 0 !important;
}

/* ============================================================================
 * CRITICAL FIX: Ensure all Ionic components receive pointer events
 *
 * Previous approach with pointer-events: none broke the layout.
 * New approach: ensure all interactive elements have pointer-events: auto
 * ============================================================================ */

/* Ensure ion-tabs and ion-router-outlet allow events to their children */
ion-tabs {
  pointer-events: auto !important;
}

ion-router-outlet {
  pointer-events: auto !important;
}

/* Everything inside router-outlet MUST receive events */
ion-router-outlet>* {
  pointer-events: auto !important;
}

/* .ion-page and ion-page should be interactive */
.ion-page,
ion-page {
  pointer-events: auto !important;
}

/* All interactive Ionic components get pointer-events */
ion-button,
ion-item,
ion-list,
ion-card,
ion-content,
ion-header,
ion-footer,
ion-toolbar,
ion-segment,
ion-segment-button,
ion-input,
ion-select,
ion-checkbox,
ion-toggle,
ion-searchbar,
ion-chip,
ion-item-sliding,
ion-item-options,
ion-item-option,
ion-fab,
ion-fab-button,
ion-tab-bar {
  pointer-events: auto !important;
}

/* Estilos legacy de .estudiantes-table eliminados - tabla HTML ya no existe en el diseño actual */

/* Estilos para filtros y controles */
.filtros-container {
  display: flex;
  gap: var(--spacing-sm);
  align-items: center;
  flex-wrap: wrap;
  padding: var(--spacing-lg);
}

.filtro-button {
  --border-radius: 20px;
  --padding-start: var(--spacing-lg);
  --padding-end: var(--spacing-lg);
  height: var(--button-height);
  font-size: var(--fs-sm);
}

.filtro-button.active {
  --background: var(--ion-color-primary);
  --color: var(--ion-color-primary-contrast);
}

/* Estilos responsivos */
@media (max-width: 768px) {
  .filtros-container {
    flex-direction: column;
    align-items: stretch;
  }
}

/* Utilidades */
.text-center {
  text-align: center;
}

.text-bold {
  font-weight: bold;
}

.text-secondary {
  color: var(--texto-secundario);
}

.bg-light {
  background-color: var(--ion-color-light);
}

.border-bottom {
  border-bottom: 1px solid var(--border-color);
}

/* Animaciones suaves */
.fade-in {
  animation: fadeIn 0.3s ease-in;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

/* ============================================================================
 * ESTILOS GLOBALES PARA ALERT DE ELIMINACIÓN (PALETA SRS)
 * ============================================================================ */

ion-alert.alert-delete-curso-srs {
  --background: #ffffff !important;

  &::part(backdrop) {
    background: rgba(0, 0, 0, 0.65);
  }

  .alert-wrapper {
    background: #ffffff !important;

    .alert-head {
      background: linear-gradient(135deg, #EC0677 0%, #d4055f 100%) !important;

      h2.alert-title {
        color: #ffffff !important;
        font-weight: 700 !important;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important;
      }
    }

    .alert-message {
      background: #ffffff !important;
      color: #0F385A !important;
      font-weight: 500 !important;
    }

    .alert-button-group {
      background: #ffffff !important;

      button {
        &.alert-button-cancel {
          background: linear-gradient(135deg, #90a4ae 0%, #78909c 100%) !important;
          color: #ffffff !important;

          span.alert-button-inner {
            color: #ffffff !important;
            font-weight: 600 !important;
          }
        }

        &.alert-button-delete {
          background: linear-gradient(135deg, #EC0677 0%, #c90569 100%) !important;
          color: #ffffff !important;

          span.alert-button-inner {
            color: #ffffff !important;
            font-weight: 700 !important;
          }
        }
      }
    }
  }
}

/* ========================================
   ESTILOS GLOBALES PARA TOASTS SRS
   ======================================== */

// Posicionamiento de toasts en el tab bar (a la derecha del searchbar)
ion-toast {
  &.toast-in-tabbar {
    --start: auto !important;
    --end: auto !important;
    left: 799.3px !important; // Después de los subtabs
    right: 20px !important;
    top: 30px !important; // Alineado verticalmente con el tab bar
    position: fixed !important;
    z-index: 10000 !important;
    max-width: 350px !important;
    margin: 0 !important;
  }
}

// Toast de éxito con paleta SRS
ion-toast.custom-toast-success {
  --background: linear-gradient(135deg, var(--verde) 0%, #b8d951 100%);
  --color: white;
  --border-radius: 12px;
  --box-shadow: 0 6px 20px rgba(166, 206, 56, 0.4);

  .toast-wrapper {
    border-radius: 12px;
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(166, 206, 56, 0.3);
    overflow: hidden;
    animation: slideInUp 0.3s ease-out;

    .toast-container {
      background: linear-gradient(135deg, var(--verde) 0%, #b8d951 100%);
      padding: 16px 20px;
      position: relative;

      &::before {
        content: '✅';
        position: absolute;
        left: 16px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 1.2rem;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
      }

      .toast-message {
        color: white;
        font-weight: 600;
        font-size: 0.95rem;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        margin-left: 32px;
      }

      .toast-button {
        --color: white;
        --color-hover: rgba(255, 255, 255, 0.8);
        font-size: 1.2rem;
        --padding-start: 8px;
        --padding-end: 8px;
      }
    }
  }
}

// Toast de advertencia con paleta SRS
ion-toast.custom-toast-warning {
  --background: linear-gradient(135deg, var(--naranja) 0%, #ffc04d 100%);
  --color: white;
  --border-radius: 12px;
  --box-shadow: 0 6px 20px rgba(255, 165, 0, 0.4);

  .toast-wrapper {
    border-radius: 12px;
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 165, 0, 0.3);
    overflow: hidden;
    animation: slideInUp 0.3s ease-out;

    .toast-container {
      background: linear-gradient(135deg, var(--naranja) 0%, #ffc04d 100%);
      padding: 16px 20px;
      position: relative;

      &::before {
        content: '⚠️';
        position: absolute;
        left: 16px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 1.2rem;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
      }

      .toast-message {
        color: white;
        font-weight: 600;
        font-size: 0.95rem;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        margin-left: 32px;
      }

      .toast-button {
        --color: white;
        --color-hover: rgba(255, 255, 255, 0.8);
        font-size: 1.2rem;
        --padding-start: 8px;
        --padding-end: 8px;
      }
    }
  }
}

// Toast de error con paleta SRS
ion-toast.custom-toast-danger {
  --background: linear-gradient(135deg, var(--magenta) 0%, #e85a9b 100%);
  --color: white;
  --border-radius: 12px;
  --box-shadow: 0 6px 20px rgba(232, 90, 155, 0.4);

  .toast-wrapper {
    border-radius: 12px;
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(232, 90, 155, 0.3);
    overflow: hidden;
    animation: slideInUp 0.3s ease-out;

    .toast-container {
      background: linear-gradient(135deg, var(--magenta) 0%, #e85a9b 100%);
      padding: 16px 20px;
      position: relative;

      &::before {
        content: '❌';
        position: absolute;
        left: 16px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 1.2rem;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
      }

      .toast-message {
        color: white;
        font-weight: 600;
        font-size: 0.95rem;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        margin-left: 32px;
      }

      .toast-button {
        --color: white;
        --color-hover: rgba(255, 255, 255, 0.8);
        font-size: 1.2rem;
        --padding-start: 8px;
        --padding-end: 8px;
      }
    }
  }
}

@keyframes slideInUp {
  from {
    transform: translateY(100%);
    opacity: 0;
  }

  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* ========================================
   ESTILOS GLOBALES DE CHECKBOXES - PALETA SRS
   ======================================== */
ion-checkbox {
  --border-color: rgba(15, 56, 90, 0.3);
  --border-color-checked: var(--verde--claro);
  --background: #ffffff;
  --background-checked: var(--verde-claro);
  /* Verde claro SRS */
  --checkmark-color: var(--azul-oscuro);
  /* Verde SRS para el checkmark */
  --border-radius: 4px;
  --size: 20px;

  &::part(container) {
    border-width: 2px;
  }

  /* Fondo blanco solo cuando NO está marcado */
  &:not(.checkbox-checked)::part(container) {
    background: #ffffff;
  }
}

/* ========================================
   ESTILOS ESTANDARIZADOS DE TOAST
   ======================================== */
.toast-success {
  --background: var(--verde-claro);
  /* Verde claro SRS (#A6CE38) */
  --color: #ffffff;
  --border-radius: 8px;
  --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);

  /* Posición debajo del header */
  margin-top: 56px !important;
  /* Altura típica del header */

  .toast-wrapper {
    animation: slideInDown 0.3s ease-out;
  }

  .toast-message {
    font-weight: 600;
    font-size: 0.95rem;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }
}

.toast-danger {
  --background: #eb445a;
  /* Rojo Ionic estándar */
  --color: #ffffff;
  --border-radius: 8px;
  --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);

  /* Posición debajo del header */
  margin-top: 56px !important;

  .toast-wrapper {
    animation: slideInDown 0.3s ease-out;
  }

  .toast-message {
    font-weight: 600;
    font-size: 0.95rem;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }
}

.toast-warning {
  --background: var(--naranja);
  /* Naranja SRS (#FBAF17) */
  --color: #ffffff;
  --border-radius: 8px;
  --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);

  /* Posición debajo del header */
  margin-top: 56px !important;

  .toast-wrapper {
    animation: slideInDown 0.3s ease-out;
  }

  .toast-message {
    font-weight: 600;
    font-size: 0.95rem;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }
}

@keyframes slideInDown {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }

  to {
    transform: translateY(0);
    opacity: 1;
  }
}
