/**
 * Estilos para Ion-Segment (Tabs)
 * Usa el sistema de variables y mixins para consistencia
 */

@use 'sass:color';
@use '../styles/variables' as *;
@use '../styles/mixins' as *;
@use '../../../shared/styles/course-tabs' as *;
@use '../../../shared/styles/breakpoints' as bp; // Import breakpoints

// ============================================
// TABS PRINCIPALES DE CURSOS
// ============================================

.cursos-container>ion-segment {
    background: linear-gradient(135deg, $azul-oscuro 0%, color.adjust($azul-oscuro, $lightness: 10%) 100%);
    border-radius: $radius-md;
    padding: spacing('xs');
    margin-bottom: spacing('md');
    @include card-elevation(2);

    ion-segment-button {
        --background: transparent;
        --background-checked: rgba(255, 255, 255, 0.2);
        --background-hover: rgba(255, 255, 255, 0.1);
        --color: rgba(255, 255, 255, 0.7);
        --color-checked: #ffffff;
        --indicator-color: #{$azul-claro};
        --indicator-height: 3px;
        --border-radius: #{$radius-sm};
        --padding-top: #{spacing('sm')};
        --padding-bottom: #{spacing('sm')};

        min-width: 100px;
        @include typography('sm', 'medium');
        @include transition(all, $transition-fast);

        // Estilos específicos basados en clases solicitadas
        &.segment-button-layout-icon-top {
            // Asegura que el contenido vertical esté bien alineado
            min-height: 4rem; // ~64px
        }

        &.segment-button-checked {
            font-weight: font-weight('bold');
            --color: #ffffff;
        }

        &.segment-button-has-label-only {
            ion-label {
                margin: 0;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }
        }

        ion-label {
            text-transform: none;
            overflow: visible;
            white-space: normal;
            line-height: 1.2;
            display: flex;
            flex-direction: column;
            align-items: flex-start; // Alineado a la izquierda (flex)
            text-align: left; // Alineado a la izquierda (texto)
            justify-content: center;
            gap: 1px;
            padding: spacing('xs') 0;

            .tab-nombre {
                font-weight: font-weight('medium');

                @include bp.desktop-only {
                    font-size: 1rem;
                }

                // 16px
                @include bp.tablet-only {
                    font-size: 0.875rem;
                }

                // 14px
                @include bp.mobile-only {
                    font-size: 0.75rem;
                }

                // 12px
            }

            .tab-codigo {
                font-weight: font-weight('normal');
                opacity: 0.85;

                @include bp.desktop-only {
                    font-size: 0.75rem;
                }

                // 12px
                @include bp.tablet-only {
                    font-size: 0.6875rem;
                }

                // 11px
                @include bp.mobile-only {
                    font-size: 0.625rem;
                }

                // 10px
            }
        }

        .crear-icon {
            font-size: 1.5rem;
            color: $color-success !important;
            --color: #{$color-success};
            margin-bottom: 4px;
        }

        &::part(native) {
            padding-left: spacing('md');
            padding-right: spacing('md');
        }

        &:hover {
            --background: rgba(255, 255, 255, 0.15);
        }
    }
}

// ============================================
// SUBTABS (Detalle / Integrantes / Importar)
// ============================================

ion-card-content>ion-segment {
    --background: rgba($azul-oscuro, 0.04);
    margin-bottom: spacing('md');
    border-radius: $radius-sm;

    ion-segment-button {
        --color: $azul-oscuro;
        --color-checked: $azul-claro;
        --indicator-color: $azul-claro;
        --background-checked: rgba($azul-claro, 0.1);
        --border-radius: #{$radius-sm};

        @include typography('sm', 'normal');
        @include transition(all, $transition-fast);

        &:hover {
            --background: rgba($azul-claro, 0.05);
        }

        ion-icon {
            font-size: 1.1rem;
            margin-bottom: spacing('xs');
        }

        ion-label {
            text-transform: none;
        }
    }
}

// ============================================
// TABS DE GRUPOS
// ============================================

.subtab-content>ion-segment {
    --background: $gris-claro;
    margin-bottom: spacing('md');
    border-radius: $radius-sm;
    padding: spacing('xs');

    ion-segment-button {
        --indicator-color: $azul-oscuro;
        --color: $gris-oscuro;
        --color-checked: $azul-oscuro;
        --background-checked: white;
        --border-radius: #{$radius-sm};

        min-width: 80px;
        @include typography('sm', 'medium');
        @include transition(all, $transition-fast);
        @include card-elevation(1);

        &:hover {
            --background: rgba(255, 255, 255, 0.5);
        }

        &::part(native) {
            padding: spacing('sm') spacing('md');
        }
    }
}

// ============================================
// RESPONSIVE
// ============================================

@include respond-to-max('md') {

    // Tabs principales más compactos en móvil
    .cursos-container>ion-segment {
        padding: spacing('xs');

        ion-segment-button {
            min-width: 100px;
            font-size: font-size('xs');

            ion-label {
                max-width: none;
            }
        }
    }

    // Subtabs con iconos más pequeños
    ion-card-content>ion-segment {
        ion-segment-button {
            font-size: font-size('xs');

            ion-icon {
                font-size: 1rem;
                margin-bottom: 2px;
            }

            ion-label {
                font-size: font-size('xs');
            }
        }
    }

    // Tabs de grupos más compactos
    .subtab-content>ion-segment {
        padding: 2px;

        ion-segment-button {
            min-width: 60px;
            font-size: font-size('xs');

            &::part(native) {
                padding: spacing('xs') spacing('sm');
            }
        }
    }
}

// ============================================
// ACCESIBILIDAD
// ============================================

ion-segment-button {
    @include focus-visible($azul-claro, 2px);

    // Touch target mínimo en móvil
    @include respond-to-max('md') {
        min-height: $touch-target-min;
    }
}

// ============================================
// ANIMACIONES
// ============================================

ion-segment {
    ion-segment-button {
        &::part(indicator) {
            @include transition(transform, $transition-base);
        }

        &::part(indicator-background) {
            border-radius: $radius-sm;
        }
    }
}