<ion-content [fullscreen]="true">
  <div class="page-container">
    <!-- Header de Página -->
    <div class="page-title-header">
      <div class="title-wrapper">
        <h2>Sistema</h2>
      </div>
    </div>

    <div class="containers-grid">
      <!-- ========================================
           SECCIÓN 1: PREFERENCIAS DE INTERFAZ (PRIORITARIA)
           Configuración de UI/UX
           ======================================== -->

      <!-- Preferencias de Interfaz -->
      <ion-card class="priority-section">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="color-palette"></ion-icon>
            Preferencias de Interfaz
          </ion-card-title>
          <ion-card-subtitle>Personaliza la experiencia visual</ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
          <ion-list>
            <!-- Theme Toggle -->
            <ion-item>
              <ion-icon name="contrast" slot="start" color="primary"></ion-icon>
              <ion-label>
                <h3 class="h3-plataforma-blue">Tema de la Aplicación</h3>
                <p class="text-gray-medium">Cambiar entre tema claro y oscuro</p>
              </ion-label>
              <app-theme-toggle slot="end"></app-theme-toggle>
            </ion-item>

            <!-- Tab Animations Toggle (NUEVO) -->
            <ion-item>
              <ion-icon name="color-wand" slot="start" color="secondary"></ion-icon>
              <ion-label>
                <h3 class="h3-plataforma-blue">Animaciones de Tabs</h3>
                <p class="text-gray-medium">Transiciones personalizadas en segmentos</p>
              </ion-label>
              <ion-toggle slot="end" [checked]="tabAnimationsEnabled()"
                (ionChange)="toggleTabAnimations($event)"></ion-toggle>
            </ion-item>

            <!-- Mensajes Emergentes -->
            <ion-item>
              <ion-icon name="notifications" slot="start" color="success"></ion-icon>
              <ion-label>
                <h3 class="h3-plataforma-blue">Mensajes Emergentes</h3>
                <p class="text-gray-medium">Mostrar notificaciones toast</p>
              </ion-label>
              <ion-toggle slot="end" [checked]="mostrarMensajesEmergentes"
                (ionChange)="toggleMensajesEmergentes($event)"></ion-toggle>
            </ion-item>

            <!-- Aviso de Selección -->
            <ion-item>
              <ion-icon name="warning" slot="start" color="warning"></ion-icon>
              <ion-label>
                <h3 class="h3-plataforma-blue">Aviso de Selección de Curso</h3>
                <p class="text-gray-medium">Mostrar aviso al editar sin curso seleccionado</p>
              </ion-label>
              <ion-toggle slot="end" [checked]="!ocultarAvisoEdicionSinSeleccion"
                (ionChange)="toggleAvisoEdicion($event)"></ion-toggle>
            </ion-item>

            <!-- Duración de Toast -->
            <ion-item>
              <ion-icon name="time" slot="start" color="tertiary"></ion-icon>
              <ion-label>
                <h3 class="h3-plataforma-blue">Duración de Mensajes</h3>
                <p class="text-gray-medium">{{ duracionToast }} segundo{{ duracionToast > 1 ? 's' : '' }}</p>
              </ion-label>
              <div slot="end" style="display: flex; gap: 8px; align-items: center;">
                <ion-button fill="clear" size="small" (click)="decrementarDuracion()" [disabled]="duracionToast <= 1">
                  <ion-icon slot="icon-only" name="remove-circle"></ion-icon>
                </ion-button>
                <ion-badge color="primary">{{ duracionToast }}s</ion-badge>
                <ion-button fill="clear" size="small" (click)="incrementarDuracion()" [disabled]="duracionToast >= 4">
                  <ion-icon slot="icon-only" name="add-circle"></ion-icon>
                </ion-button>
              </div>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>

      <!-- ========================================
           SECCIÓN 2: GESTIÓN DE BASE DE DATOS (PRIORITARIA)
           Acciones de backup y limpieza
           ======================================== -->

      <!-- Gestión de Base de Datos -->
      <ion-card class="priority-section">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="server"></ion-icon>
            Gestión de Base de Datos
          </ion-card-title>
          <ion-card-subtitle>Administra tus datos almacenados</ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
          <ion-list>
            <!-- Exportar DB -->
            <ion-item button (click)="exportarBaseDatosCompleta()">
              <ion-icon name="cloud-download" slot="start" color="success"></ion-icon>
              <ion-label>
                <h3 class="h3-plataforma-blue">Exportar Base de Datos</h3>
                <p class="text-gray-medium">Descargar backup completo (JSON)</p>
              </ion-label>
              <ion-icon name="chevron-forward" slot="end"></ion-icon>
            </ion-item>

            <!-- Importar DB -->
            <ion-item button (click)="fileInputDB.click()">
              <ion-icon name="cloud-upload" slot="start" color="primary"></ion-icon>
              <ion-label>
                <h3 class="h3-plataforma-blue">Importar Base de Datos</h3>
                <p class="text-gray-medium">Restaurar desde archivo JSON</p>
              </ion-label>
              <ion-icon name="chevron-forward" slot="end"></ion-icon>
            </ion-item>
            <input #fileInputDB type="file" accept=".json" style="display: none"
              (change)="onBaseDatosFileSelected($event)" />

            <!-- Limpiar DB -->
            <ion-item button (click)="limpiarBaseDatosEstadoCero()">
              <ion-icon name="trash" slot="start" color="danger"></ion-icon>
              <ion-label>
                <h3 class="h3-plataforma-blue">Limpiar Base de Datos</h3>
                <p class="text-gray-medium">Eliminar evaluaciones y estados</p>
              </ion-label>
              <ion-icon name="chevron-forward" slot="end"></ion-icon>
            </ion-item>

            <!-- Limpiar Caché PWA -->
            <ion-item button (click)="limpiarCachePWA()">
              <ion-icon name="brush" slot="start" color="warning"></ion-icon>
              <ion-label>
                <h3 class="h3-plataforma-blue">Limpiar Caché PWA</h3>
                <p class="text-gray-medium">Eliminar archivos cacheados (no afecta datos)</p>
              </ion-label>
              <ion-icon name="chevron-forward" slot="end"></ion-icon>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>

      <!-- ========================================
           SECCIÓN 3: INFORMACIÓN DEL SISTEMA
           Solo lectura - Datos informativos
           ======================================== -->

    </div>
  </div>
</ion-content>