// ============================================
// TYPOGRAPHY MIXINS - MAP-BASED SYSTEM
// ============================================
// Sistema de mixins tipográficos usando configuración centralizada

@use 'sass:map';
@use './typography-variables' as *;
@use './breakpoints' as bp;

// ============================================
// MIXIN PRINCIPAL: RESPONSIVE FONT SIZE
// ============================================

/**
 * Aplica font-size responsive según breakpoints
 * @param {size} $desktop - Tamaño para desktop (≥992px)
 * @param {size} $tablet - Tamaño para tablet (768px-991px)
 * @param {size} $mobile - Tamaño para mobile (<768px)
 * 
 * Uso:
 * .my-element {
 *   @include responsive-font-size(1.125rem, 1.063rem, 1.000rem);
 * }
 */
@mixin responsive-font-size($desktop, $tablet, $mobile) {
    font-size: $desktop;

    @include bp.tablet-only {
        font-size: $tablet;
    }

    @include bp.mobile-only {
        font-size: $mobile;
    }
}

// ============================================
// MIXIN UNIVERSAL: APPLY TYPOGRAPHY
// ============================================

/**
 * Aplica estilos tipográficos completos desde el mapa de configuración
 * @param {string} $type - Tipo de tipografía del mapa $typography-configs
 * 
 * Tipos disponibles:
 * - 'page-title'       : Títulos principales de página
 * - 'card-header'      : Encabezados de tarjetas
 * - 'tab-nombre'       : Nombres en tabs
 * - 'tab-codigo'       : Códigos en tabs
 * - 'input-value'      : Valores de inputs/selects
 * - 'form-label'       : Etiquetas de formularios
 * - 'button-primary'   : Botones primarios
 * - 'button-secondary' : Botones secundarios
 * - 'char-value'       : Valores de características
 * - 'char-label'       : Etiquetas de características
 * - 'helper-text'      : Textos de ayuda
 * - 'footnote'         : Notas al pie/timestamps
 * - 'body'             : Texto general
 * 
 * Uso:
 * .my-element {
 *   @include apply-typography('page-title');
 * }
 */
@mixin apply-typography($type) {
    $config: map.get($typography-configs, $type);

    @if not $config {
        @error "Typography type '#{$type}' not found in $typography-configs map.";
    }

    // Aplicar propiedades base PRIMERO (evita warnings de mixed declarations)
    font-weight: map.get($config, 'weight');
    font-family: map.get($config, 'family');
    line-height: map.get($config, 'line-height');

    // LUEGO aplicar font-size (responsive o fijo)
    @if map.get($config, 'responsive')==true {
        // Tipos responsive: usar breakpoints
        @include responsive-font-size(map.get($config, 'desktop'),
            map.get($config, 'tablet'),
            map.get($config, 'mobile'));
    }

    @else {
        // Tipos no-responsive: tamaño fijo
        font-size: map.get($config, 'size');
    }
}

// ============================================
// MIXINS LEGACY (Mantener por compatibilidad)
// ============================================
// Estos mixins se mantienen para no romper código existente
// que los use directamente. Ahora simplemente llaman al mixin universal.

@mixin typography-page-title {
    @include apply-typography('page-title');
}

@mixin typography-card-header {
    @include apply-typography('card-header');
}

@mixin typography-tab-nombre {
    @include apply-typography('tab-nombre');
}

@mixin typography-tab-codigo {
    @include apply-typography('tab-codigo');
}

@mixin typography-input-value {
    @include apply-typography('input-value');
}

@mixin typography-form-label {
    @include apply-typography('form-label');
}

@mixin typography-button-primary {
    @include apply-typography('button-primary');
}

@mixin typography-button-secondary {
    @include apply-typography('button-secondary');
}

@mixin typography-char-value {
    @include apply-typography('char-value');
}

@mixin typography-char-label {
    @include apply-typography('char-label');
}

@mixin typography-helper-text {
    @include apply-typography('helper-text');
}

@mixin typography-footnote {
    @include apply-typography('footnote');
}

@mixin typography-body {
    @include apply-typography('body');
}

// ============================================
// MIXINS UTILITARIOS
// ============================================

/**
 * Aplica solo font-weight y font-family sin cambiar tamaño
 * Útil para mantener consistencia de fuentes
 */
@mixin font-style($weight, $family) {
    font-weight: $weight;
    font-family: $family;
}

/**
 * Trunca texto con ellipsis
 */
@mixin text-truncate {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/**
 * Limita texto a N líneas con ellipsis
 */
@mixin text-clamp($lines: 2) {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
}